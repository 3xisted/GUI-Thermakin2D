function varargout = ThermaGUI(varargin)

gui_Singleton = 1;
gui_State = struct('gui_Name',       mfilename, ...
    'gui_Singleton',  gui_Singleton, ...
    'gui_OpeningFcn', @ThermaGUI_OpeningFcn, ...
    'gui_OutputFcn',  @ThermaGUI_OutputFcn, ...
    'gui_LayoutFcn',  [] , ...
    'gui_Callback',   []);
if nargin && ischar(varargin{1})
    gui_State.gui_Callback = str2func(varargin{1});
end

if nargout
    [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
else
    gui_mainfcn(gui_State, varargin{:});
end

% --- Executes just before ThermaGUI is made visible.
function ThermaGUI_OpeningFcn(hObject, eventdata, handles, varargin)
handles.output = hObject;

% Update handles structure
guidata(hObject, handles);

global cmp_created cnd_created

cmp_created = 0;
cnd_created = 0;

imshow('cross.png','Parent',handles.intro_chckbx_cmp)

axes(handles.intro_chckbx_cnd)
imshow('cross.png')

axes(handles.intro_chckbx_tk2d)
imshow('cross.png')

axes(handles.intro_chckbx_out)
imshow('cross.png')

set(handles.cnd_button,'Enable','Off');
set(handles.tk2d_button,'Enable','Off');
set(handles.out_button,'Enable','Off');

function varargout = ThermaGUI_OutputFcn(hObject, eventdata, handles)
varargout{1} = handles.output;


%% $$$$$$$$$$$$$$$$$ COMPONENT GUI $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
%This callback creates component figure when components button is clicked
function cmp_button_Callback(hObject, eventdata, handles)
global cmp_created
if cmp_created == 1
    imshow('check.png','Parent',handles.intro_chckbx_cmp)
    set(handles.cnd_button,'Enable','On');
else
    imshow('cross.png','Parent',handles.intro_chckbx_cmp)
    
    %Creates components gui with options
    cmp_fig = figure(...
        'Color',[.94 .94 .94],...
        'Position',[500,500,165,130],...
        'Resize','Off',...
        'MenuBar','none',...
        'Name','Conditions',...
        'tag','cmp_fig',...
        'WindowStyle','modal');
    
    %Creates text in option to guide the user
    uicontrol(...
        'Parent',cmp_fig,...
        'Position',[10 90 150 30],...
        'String','Choose Option',...
        'Style','text',...
        'TooltipString','Default');
    
    %Creates button to import a .cmp file
    cmp_import_pshbttn = uicontrol(...
        'Parent',cmp_fig,...
        'Position',[10 70 150 30],...
        'String','Import existing .cmp file',...
        'Style','pushbutton',...
        'Tag','cmp_import_pshbttn',...
        'Callback',@cmp_import_pshbttn_callback,...
        'TooltipString','Default');
    
    %Create a button to open the gui for custom creation of .cmp
    cmp_custom_pshbttn = uicontrol(...
        'Parent',cmp_fig,...
        'Position',[10 40 150 30],...
        'String','Create custom .cmp file',...
        'Style','pushbutton',...
        'Tag','cnd_custom_pshbttn',...
        'Callback',@cmp_custom_pshbttn_Callback,...
        'TooltipString','Default');
    
    %Creates pushbutton to cancel process
    cpd_cancel_pshbttn = uicontrol(...
        'Parent',cmp_fig,...
        'Position',[10 10 150 30],...
        'String','Cancel',...
        'Style','pushbutton',...
        'Tag','cmp_cancel_pshbttn',...
        'TooltipString','Default');
end


%% =============== IMPORT COMPONENT =======================================
function cmp_import_pshbttn_callback(hObject, eventdata, handles)
global cmp_created cmp_filename
delete(gcf)

[FileName,PathName] = uigetfile({'*.cmp',...
    'Component Files (*.cmp)';'*.txt', 'Text Files (*.txt)';...
    '*.*','All Files (*.*)'},'Select the Components File');
pathn = fullfile(PathName,FileName);
curpath = fullfile(pwd,FileName);
if isequal(FileName,0) %if no file is chosen or canceled then display Cancel
    disp('User selected Cancel')
else % else continue
    %     disp(['User selected ', fullfile(PathName, FileName)])
    if ~isequal(curpath,pathn) % determine if file is in current directory or not
        copyfile(fullfile(PathName, FileName)); % copy file into directory for Matlab
    end
    cmp_filename = FileName;
    cmp_created = 1;
end


%% =============== CUSTOM COMPONENT GUI ===================================
function cmp_custom_pshbttn_Callback(hObject, eventdata, handles)
delete(gcf)
%% Global variables
global cmp_custom_figure... %Contains the guidata of the custom cmp gui
    cmp_cmp_lst...
    cmp_mixprop_sswel_edt...
    cmp_mixprop_lswel_edt...
    cmp_mixprop_gswel_edt...
    cmp_mixprop_paracnd_edt...
    cmp_mixprop_paratrans_edt
%% Code to retrieve component file
cmp_file = dir('COMPONENTS.cmp'); %cmp_file takes the file COMPONENTS.cmp
cmp_a = textscan(fopen(cmp_file.name),'%s','Delimiter',':'); %reads in the
%file and set delimiter to ":"

cmp_a_sz = size(cmp_a{1}); %Retrieves the number of lines exist in the delimitered file
cmpstate_cnt = 0;
cmpname_cnt = 0; %initialized the count of number of components
for  cmp_a_cnt=1:cmp_a_sz(1,1) %loops through the code as many times as there is lines in file
    if strcmp(cmp_a{1}{cmp_a_cnt},'MATERIAL') %if the string in the line match MATERIAL
        cmpname_cnt=cmpname_cnt+1; %then add one to the component count which sets up the how the array components is ordered
        cmpname(cmpname_cnt) = cellstr(cmp_a{1}{cmp_a_cnt+1}); %This reads in each component using the component count, it read the line below the line it found MATERIAL
    end
end

cmp_b = textscan(fopen(cmp_file.name),'%s','Delimiter',''); %read in the file again with no delimiter
cmp_b_sz = size(cmp_b{1}); %retrieves the number lines there are in the file
cmp_b_cnt = 0; %intializes counter cmp_b
cmpname_cnt = 0; %intialized the counter for the cmpname

while cmp_b_cnt < cmp_b_sz(1,1) %while the cmp_b counter (makes it possible to go through every line) is less than the number of lines in the no delimetered textscan
    cmp_b_cnt = cmp_b_cnt+1; %add one to the line
    if strncmp((cmp_b{1}{cmp_b_cnt}),'MATERIAL',8); %if that lines first 8 characters match MATERIAL
        cmp_c_cnt = 1; %set one to the counter that keeps track of number of line in each material
        cmpname_cnt = cmpname_cnt+1; %also add one to the cmpname counter which acts a counter to indicate how many materials there are
        while cmp_b_cnt < cmp_b_sz(1,1) && ~strncmp(cmp_b{1}{cmp_b_cnt+1},'MATERIAL',8) %while the current line is less than total number
            % of lines and the first 8 characters doesnt match MATERIAL
            cmp_b_cnt = cmp_b_cnt+1; %add one to the number of lines to move down the line
            cmp_c{cmpname_cnt}{cmp_c_cnt}= cellstr(cmp_b{1}{cmp_b_cnt}); %scan the string in current line
            cmp_c_cnt= cmp_c_cnt+1; %add one to the counter that keeps track of number of line in each material
        end
        cmp_c{cmpname_cnt} = transpose(cmp_c{1,cmpname_cnt}); %at the end of completing the list creating of one material, flip it because it is on the wrong dimensions
    end
    
end

for cmpname_cnt=1:cmpname_cnt %loop for as many time as there is materials
    cmp_cnt = 1; %initialize another components counter for a loop
    cmp_e_cnt = 0; %intialize
    cmp_d_cnt = 0; %initialize
    cmp_c_sz = size(cmp_c{cmpname_cnt}); % retrieves the number of lines in the kinetic data for each component
    
    while cmp_cnt < cmp_c_sz(1,1) && ~strncmp(cmp_c{cmpname_cnt}{cmp_cnt},'REACTION',8) %while the components counters is less than the number of lines in the current kinetic data and first 8 characters is not REACTION
        cmp_d_cnt = cmp_d_cnt + 1; %adds one to the counter for number of lines
        cmp_d{cmpname_cnt}{cmp_d_cnt}= cellstr(cmp_c{cmpname_cnt}{cmp_cnt}); % Reads in each line in the kinetics data
        cmp_cnt = cmp_cnt + 1; %adds one
    end
    cmp_d{cmpname_cnt} = transpose(cmp_d{1,cmpname_cnt});
    
    for i=1:cmp_d_cnt
        cmp_d_char{i,:,cmpname_cnt}= char(cmp_d{1,cmpname_cnt}{i,1});
    end
    cmp_d_char{cmpname_cnt} = char(cmp_d_char{:,1,cmpname_cnt});
    
    while cmp_cnt <= cmp_c_sz(1,1)
        cmp_e_cnt = cmp_e_cnt + 1;
        cmp_e{cmpname_cnt}{cmp_e_cnt}= cellstr(cmp_c{cmpname_cnt}{cmp_cnt});
        cmp_cnt = cmp_cnt + 1;
    end
    cmp_e{cmpname_cnt} = transpose(cmp_e{1,cmpname_cnt});
    
    for i=1:cmp_e_cnt
        cmp_e_char{i,:,cmpname_cnt}= char(cmp_e{1,cmpname_cnt}{i,1});
    end
    cmp_e_char{cmpname_cnt} = char(cmp_e_char{:,1,cmpname_cnt});
end

global cmp_d_chars cmp_e_chars
cmp_d_chars = cmp_d_char;
cmp_e_chars = cmp_e_char;
%% Creates Components figure sets it to cnd_figure
cmp_custom_figure = figure(...
    'Color',[.94 .94 .94],...
    'Position',[520 460 440 270],...
    'Resize','Off',...
    'MenuBar','none',...
    'Name','Components',...
    'tag','cmp_fig',...
    'NumberTitle','off',...
    'CloseRequestFcn',@closereq);
%% Creates the list with the components
cmp_cmp_lst = uicontrol(...
    'Parent',cmp_custom_figure,...
    'Position',[50 70 150 170],...
    'Style','listbox',...
    'String',cmpname,...
    'Tag','cmp_cmp_lst',...
    'max',30,...
    'min',1);
% Creates the text of intructions
cmp_help_txt = uicontrol(...
    'Parent',cmp_custom_figure,...
    'Position',[20 30 200 40],...
    'Style','text',...
    'String','HELP TEXT FILLER',...
    'Tag','cmp_help_txt');
%% Creates the Mixture Properties panel
cmp_mixprop_pnl = uipanel(...
    'Parent',cmp_custom_figure,...
    'Title','Mixture Properties',...
    'Units','pixels',...
    'Position',[240 80 200 160],...
    'FontWeight','bold',...
    'TitlePosition','centertop',...
    'BorderType','none');

%Creates the text of Solid Swelling and edit text box inside the Mixture
%Properties panel
cmp_mixprop_sswel_txt = uicontrol(...
    'Parent',cmp_mixprop_pnl,...
    'Position',[0 120 70 15],...
    'Style','text',...
    'String','Solid Swelling',...
    'Tag','cmp_mixprop_sswel_txt');
cmp_mixprop_sswel_edt = uicontrol(...
    'Parent',cmp_mixprop_pnl,...
    'Position',[105 118 53 22],...
    'Style','edit',...
    'String','0',...
    'Tag','cmp_mixprop_sswel_edt',...
    'TooltipString','Default');

%Creates the text of Liquid Swelling and edit text box inside the Mixture
%Properties panel
cmp_mixprop_lswel_txt = uicontrol(...
    'Parent',cmp_mixprop_pnl,...
    'Position',[0 95 75 15],...
    'Style','text',...
    'String','Liquid Swelling',...
    'Tag','cmp_mixprop_lswel_txt');
cmp_mixprop_lswel_edt = uicontrol(...
    'Parent',cmp_mixprop_pnl,...
    'Position',[105 93 53 22],...
    'Style','edit',...
    'String','0',...
    'Tag','cmp_mixprop_lswel_edt',...
    'TooltipString','Default');

%Creates the text of Gas Swelling Limit and edit text box inside the
%Mixutre Properties panel
cmp_mixprop_gswel_txt = uicontrol(...
    'Parent',cmp_mixprop_pnl,...
    'Position',[0 70 90 15],...
    'Style','text',...
    'String','Gas Swelling Limit',...
    'Tag','cmp_mixprop_gswel_txt');
cmp_mixprop_gswel_edt = uicontrol(...
    'Parent',cmp_mixprop_pnl,...
    'Position',[105 68 53 22],...
    'Style','edit',...
    'String','1e-30',...
    'Tag','cmp_mixprop_gswel_edt',...
    'TooltipString','Default');

%Creates the text of Parallel Conductivity and edit text box inside the
%Mixture Properties panel
cmp_mixprop_paracnd_txt = uicontrol(...
    'Parent',cmp_mixprop_pnl,...
    'Position',[0 45 100 15],...
    'Style','text',...
    'String','Parallel Conductivity',...
    'Tag','cmp_mixprop_paracnd_txt');
cmp_mixprop_paracnd_edt = uicontrol(...
    'Parent',cmp_mixprop_pnl,...
    'Position',[105 43 53 22],...
    'Style','edit',...
    'String','0.5',...
    'Tag','cmp_mixprop_paracnd_edt',...
    'TooltipString','Default');

%Creates the text of Parallel Transport and edit text box inside the
%Mixture Properties panel
cmp_mixprop_paratrans_txt = uicontrol(...
    'Parent',cmp_mixprop_pnl,...
    'Position',[0 20 90 15],...
    'Style','text',...
    'String','Parallel Transport',...
    'Tag','cmp_mixprop_paratrans_txt');
cmp_mixprop_paratrans_edt = uicontrol(...
    'Parent',cmp_mixprop_pnl,...
    'Position',[105 18 53 22],...
    'Style','edit',...
    'String','0.5',...
    'Tag','cmp_mixprop_gparatrans_edt',...
    'TooltipString','Default');

%Creates the text of "Default Value" to indicate default Mixture Properties
cmp_mixprop_defvals_txt = uicontrol(...
    'Parent',cmp_mixprop_pnl,...
    'Position',[40 0 90 15],...
    'Style','text',...
    'String','(Default Values)',...
    'Tag','cmp_mixprop_defvals_txt',...
    'TooltipString','Default');
%% Buttons
%Creates the create button to create the components file
cmp_crte_pshbttn = uicontrol(...
    'Parent',cmp_custom_figure,...
    'Position',[140 10 160 30],...
    'Style','pushbutton',...
    'String','Create Components Files',...
    'Tag','cmp_crte_pshbttn',...
    'Callback',@cmp_crte_pshbttn_callback,...
    'TooltipString','Default');

%Creates the reset button to reset all settings in the Components figure
cmp_reset_pshbttn = uicontrol(...
    'Parent',cmp_custom_figure,...
    'Position',[5 10 35 15],...
    'Style','pushbutton',...
    'String','reset',...
    'Tag','cmp_crte_pshbttn',...
    'TooltipString','Default');

cmp_help_pshbttn = uicontrol(...
    'Parent',cmp_custom_figure,...
    'Position',[400 10 35 15],...
    'Style','pushbutton',...
    'String','Help',...
    'Tag','cmp_help_pshbttn',...
    'TooltipString','Default');
function cmp_crte_pshbttn_callback(hObject, eventdata, handles)
global cmp_cmp_lst...
    cmp_mixprop_sswel_edt...
    cmp_mixprop_lswel_edt...
    cmp_mixprop_gswel_edt...
    cmp_mixprop_paracnd_edt...
    cmp_mixprop_paratrans_edt...
    cmp_d_chars cmp_e_chars...
    cmp_filename cmp_created

mix_prop{1} = 'MIXTURES';
mix_prop{2} = sprintf('S SWELLING:           %s',cmp_mixprop_sswel_edt.String);
mix_prop{3} = sprintf('L SWELLING:           %s',cmp_mixprop_lswel_edt.String);
mix_prop{4} = sprintf('G SWELLING LIMIT:     %s',cmp_mixprop_gswel_edt.String);
mix_prop{5} = sprintf('PARALL CONDUCTIVITY:  %s',cmp_mixprop_paracnd_edt.String);
mix_prop{6} = sprintf('PARALL TRANSPORT:     %s',cmp_mixprop_paratrans_edt.String);
mix_prop_char = char(mix_prop);

cmp_selected = cmp_cmp_lst.Value;
cmp_e_char_s = char(cmp_e_chars{cmp_selected});
cmp_d_char_s = char(cmp_d_chars{cmp_selected});

cmp_d_char_s(all(cmp_d_char_s == ' ', 2), :) = [];
cmp_e_char_s(all(cmp_e_char_s == ' ', 2), :) = [];

cmp_file = char(cmp_d_char_s,' ',mix_prop_char,' ',cmp_e_char_s);

[FileName,PathName] = uiputfile('*.cmp','Save as');
if isequal(FileName,0) %if no file is chosen or canceled then display Cancel
    disp('User selected Cancel')
else
    dlmwrite(FileName,cmp_file,'delimiter', '', 'newline', 'pc');
    dlmwrite('test.cmp',cmp_file,'delimiter', '', 'newline', 'pc');
    dir_sz = size(PathName,2);
    if ~strncmp(pwd,PathName,dir_sz-1)
        movefile(FileName,PathName,'f');
    end
    
    cmp_filename = FileName;
    cmp_created = 1;
    
    delete(gcf)
end



%% $$$$$$$$$$$$$$$$$$ CONDTIONS GUI $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
function cnd_button_Callback(hObject, eventdata, handles)
global cnd_created cmp_created

if cnd_created == 0 && cmp_created == 1
    imshow('cross.png','Parent',handles.intro_chckbx_cnd)
    
    cnd_fig = figure(...
        'Color',[.94 .94 .94],...
        'Position',[200,200,165,280],...
        'Resize','Off',...
        'MenuBar','none',...
        'Name','Conditions',...
        'tag','cnd_fig',...
        'WindowStyle','modal');
    
    uicontrol(...
        'Parent',cnd_fig,...
        'Position',[10 245 150 30],...
        'String','Choose Option',...
        'Style','text',...
        'TooltipString','Default');
    
    cnd_tga_dsc_pshbttn = uicontrol(...
        'Parent',cnd_fig,...
        'Position',[10 220 150 30],...
        'String','TGA/DSC',...
        'Style','pushbutton',...
        'Tag','cnd_tga_dsc_pshbttn',...
        'Callback',@cnd_tga_dsc_pshbttn_callback,...
        'TooltipString','Default');
    
    cnd_cone_calor_pshbttn = uicontrol(...
        'Parent',cnd_fig,...
        'Position',[10 185 150 30],...
        'String','Cone Calorimeter',...
        'Style','pushbutton',...
        'Tag','cnd_cone_calor_pshbttn',...
        'Callback',@cnd_cone_calor_pshbttn_callback,...
        'TooltipString','Default');
    
    cnd_lift_pshbttn = uicontrol(...
        'Parent',cnd_fig,...
        'Position',[10 150 150 30],...
        'String','LIFT',...
        'Style','pushbutton',...
        'Tag','cnd_lift_pshbttn',...
        'Callback',@cnd_lift_pshbttn_callback,...
        'TooltipString','Default');
    
    cnd_ul94_pshbttn = uicontrol(...
        'Parent',cnd_fig,...
        'Position',[10 115 150 30],...
        'String','UL94',...
        'Style','pushbutton',...
        'Tag','cnd_ul94_pshbttn',...
        'Callback',@cnd_ul94_pshbttn_callback,...
        'TooltipString','Default');
    
    cnd_imprt_pshbttn = uicontrol(...
        'Parent',cnd_fig,...
        'Position',[10 80 150 30],...
        'String','Import existing .cnd file',...
        'Style','pushbutton',...
        'Tag','cnd_imprt_pshbttn',...
        'Callback',@cnd_imprt_pshbttn_callback,...
        'TooltipString','Default');
    
    cnd_crtecustom_pshbttn = uicontrol(...
        'Parent',cnd_fig,...
        'Position',[10 45 150 30],...
        'String','Create custom .cnd file',...
        'Style','pushbutton',...
        'Tag','cnd_crtecustom_pshbttn',...
        'Callback',@cnd_custom_pshbttn_callback,...
        'TooltipString','Default');
    
    cnd_cancel_pshbttn = uicontrol(...
        'Parent',cnd_fig,...
        'Position',[45 10 80 30],...
        'String','Cancel',...
        'Style','pushbutton',...
        'Tag','cnd_cancel_pshbttn',...
        'Callback',@cnd_cancel_pshbttn_callback,...
        'TooltipString','Default');
    
elseif cnd_created == 1 && cmp_created == 1
    imshow('check.png','Parent',handles.intro_chckbx_cnd)
end
%% =================== LIFT ===============================================
function cnd_lift_pshbttn_callback(hObject, eventdata, handles)
close(gcf)
%% Object structure
% Thickness
% Mass Fraction Material
%% Obj Boundaries
% FRONT
% End Time (External Heat Flux 1)
% End Time (External Heat Flux 2)
% End Time (External Heat Flux 3)
%% Integration Parameters

% Layer Size
% Element Size
% Time Step
% Duration

% Layers
% Elements
% Time Steps
%%
cnd_lift_fig = figure(...
    'Color',[.94 .94 .94],...
    'Position',[200,200,400,300],...
    'Resize','Off',...
    'MenuBar','none',...
    'Name','Conditions for LIFT',...
    'tag','cnd_lift_fig');
%% ======================== CONDITION CUSTOM ==============================
function cnd_custom_pshbttn_callback(hObject, eventdata, handles)
close(gcf)

global cnd_custom_fig...
    cnd_intpar_pnl...
    cnd_intpar_elmtsz_txt cnd_intpar_elmtsz_edt...
    cnd_intpar_timestp_txt cnd_intpar_timestp_edt...
    cnd_intpar_dur_txt cnd_intpar_dur_edt...
    cnd_intpar_outfrq_txt...
    cnd_intpar_elmt_txt cnd_intpar_elmt_edt...
    cnd_intpar_timestps_txt cnd_intpar_timestps_edt...
    cnd_objbnd_pnl cnd_objbnd_tpbnd_txt cnd_objbnd_bttmbnd_txt...
    cmp_filename

%Retrieving gases of materials
%% Components
global cmpname_list

cmp_file = fopen(cmp_filename); %open file
cmp_file_delim = textscan(cmp_file, '%s', 'Delimiter', ':'); %scan file and make new line after ':'
fclose(cmp_file); % close file

cmp_line_sz = size(cmp_file_delim{1}); %size of file_strings (number of rows)
cmp_line_cnt = 0; %counter for amount of lines
cmpname_cnt = 0; %counter for amount of components
cmpstate_cnt = 0;
while cmp_line_cnt < cmp_line_sz(1,1) %while the counter is less than the actual amount of lines in file continue loop
    cmp_line_cnt = cmp_line_cnt+1; % add 1 to the counter to identify what line it is on
    if strcmp(cmp_file_delim{1}{cmp_line_cnt},'COMPONENT') % if loop reaches string 'COMPONENT'...
        cmp_line_cnt = cmp_line_cnt+1; %add 1 to line counter
        cmpname_cnt=(cmpname_cnt)+1; %Add 1 to cmp counter
        cmpname(cmpname_cnt,1) = cellstr(cmp_file_delim{1}{cmp_line_cnt}); %Set string in that particular line to be in the cmp list
        cmp_line_cnt = cmp_line_cnt+1; % end it by adding another line
    end
    if strcmp(cmp_file_delim{1}{cmp_line_cnt},'STATE') % if loop reaches string 'COMPONENT'...
        cmp_line_cnt = cmp_line_cnt+1; %add 1 to line counter
        cmpstate_cnt=(cmpstate_cnt)+1; %Add 1 to cmpstate counter
        cmpstate(cmpstate_cnt,1) = cellstr(cmp_file_delim{1}{cmp_line_cnt}); %Set string in that particular line to be in the cmpstate list
        cmp_line_cnt = cmp_line_cnt+1; %end it by adding another line
    end
end
cmp_val = find(strncmp(cmpstate,'G',3)); %Find all cmpstates with G(gas)
index_value = size(cmp_val,1); %Retrieve the values of the string G was found
for j = 1:index_value %Loop through
    cmp_gas(j,1) = cmpname(cmp_val(j)); %And match the value with the component since it corresponds with the states
end

cmpname_list = cmpname;
%% Creates Conditions figure sets it to cnd_figure
cnd_custom_fig = figure(...
    'Color',[.94 .94 .94],...
    'Position',[200,200,870,530],...
    'Resize','Off',...
    'MenuBar','none',...
    'Name','Custom Conditions',...
    'tag','cnd_custom_fig',...
    'NumberTitle','off',...
    'CloseRequestFcn',@cnd_closefcn);
%% Integration Parameters
cnd_intpar_pnl = uipanel(...
    'Parent',cnd_custom_fig,...
    'BorderType','none',...
    'FontSize',10,...
    'FontWeight','bold',...
    'Units','pixels',...
    'Position',[20 250 200 175],...
    'Tag','cnd_intpar_pnl',...
    'Title','Integration Parameter',...
    'TitlePosition','centertop');

cnd_intpar_elmtsz_txt = uicontrol(...
    'Parent',cnd_intpar_pnl,...
    'Position',[20 130 70 15],...
    'Style','text',...
    'String','Element Size',...
    'Tag','cnd_intpar_elmtsz_txt',...
    'TooltipString','Default');

cnd_intpar_elmtsz_edt = uicontrol(...
    'Parent',cnd_intpar_pnl,...
    'Position',[100 128 50 22],...
    'Style','edit',...
    'String','5e-5',...
    'Tag','cnd_intpar_elmtsz_edt',...
    'TooltipString','Default');

cnd_intpar_timestp_txt = uicontrol(...
    'Parent',cnd_intpar_pnl,...
    'Position',[35 110 55 15],...
    'Style','text',...
    'String','Time Step',...
    'Tag','cnd_intpar_timestp_txt',...
    'TooltipString','Default');

cnd_intpar_timestp_edt = uicontrol(...
    'Parent',cnd_intpar_pnl,...
    'Position',[100 108 50 22],...
    'Style','edit',...
    'String','0.01',...
    'Tag','cnd_intpar_timestp_edt',...
    'TooltipString','Default');

cnd_intpar_dur_txt = uicontrol(...
    'Parent',cnd_intpar_pnl,...
    'Position',[40 90 50 15],...
    'Style','text',...
    'String','Duration',...
    'Tag','cnd_intpar_dur_txt',...
    'TooltipString','Default');

cnd_intpar_dur_edt = uicontrol(...
    'Parent',cnd_intpar_pnl,...
    'Position',[100 88 50 22],...
    'Style','edit',...
    'String','600',...
    'Tag','cnd_intpar_dur_edt',...
    'TooltipString','Default');

cnd_intpar_outfrq_txt = uicontrol(...
    'Parent',cnd_intpar_pnl,...
    'Position',[65 55 100 15],...
    'Style','text',...
    'String','Output Frequency',...
    'Tag','cnd_intpar_outfrq_txt',...
    'TooltipString','Default');

cnd_intpar_elmt_txt = uicontrol(...
    'Parent',cnd_intpar_pnl,...
    'Position',[40 30 50 15],...
    'Style','text',...
    'String','Elements',...
    'Tag','cnd_intpar_elmt_txt',...
    'TooltipString','Default');

cnd_intpar_elmt_edt = uicontrol(...
    'Parent',cnd_intpar_pnl,...
    'Position',[100 28 50 22],...
    'Style','edit',...
    'String','20',...
    'Tag','cnd_intpar_elmt_edt',...
    'TooltipString','Default');

cnd_intpar_timestps_txt = uicontrol(...
    'Parent',cnd_intpar_pnl,...
    'Position',[30 10 60 15],...
    'Style','text',...
    'String','Time Steps',...
    'Tag','cnd_intpar_timestps_txt',...
    'TooltipString','Default');

cnd_intpar_timestps_edt = uicontrol(...
    'Parent',cnd_intpar_pnl,...
    'Position',[100 8 50 22],...
    'Style','edit',...
    'String','100',...
    'Tag','cnd_intpar_timestps_edt',...
    'TooltipString','Default');
%% Boundary
cnd_objbnd_pnl = uipanel(...
    'BorderType','none',...
    'FontSize',10,...
    'FontWeight','bold',...
    'Units','pixels',...
    'Position',[230 50 600 460],...
    'Tag','cnd_objbnd_pnl',...
    'Title','Object Boundaries',...
    'TitlePosition','centertop');

cnd_objbnd_tpbnd_txt = uicontrol(...
    'Parent',cnd_objbnd_pnl,...
    'Position',[80 420 100 15],...
    'Style','text',...
    'String','Top Boundary',...
    'Tag','cnd_objbnd_tpbnd_txt');

cnd_objbnd_bttmbnd_txt = uicontrol(...
    'Parent',cnd_objbnd_pnl,...
    'Position',[385 420 100 15],...
    'Style','text',...
    'String','Bottom Boundary',...
    'Tag','cnd_objbnd_bttmbnd_txt');
%% Top Boundary
global cnd_tpbnd_expnl cnd_tpbnd_inpnl...
    cnd_tpbnd_msstrns_txt cnd_tpbnd_msstrns_mn1...
    cnd_tpbnd_msstrns_mn2_1 cnd_tpbnd_msstrns_mn3_1...
    cnd_tpbnd_msstrns_edt1_1 cnd_tpbnd_msstrns_edt2_1...
    cnd_tpbnd_addmt_pshbttn cnd_tpbnd_remmt_pshbttn...
    cnd_tpbnd_outtmptimep_txt cnd_tpbnd_outtmptimep_edt1...
    cnd_tpbnd_outtmptimep_edt2...
    cnd_tpbnd_convcoeff1_txt cnd_tpbnd_convcoeff1_edt...
    cnd_tpbnd_exrd_txt cnd_tpbnd_exrd_mn...
    cnd_tpbnd_tmprg1_txt cnd_tpbnd_tmprg1_edt1...
    cnd_tpbnd_tmprg1_edt2 cnd_tpbnd_tmprg1_edt3...
    cnd_tpbnd_tmprg2_txt cnd_tpbnd_tmprg2_edt1...
    cnd_tpbnd_tmprg2_edt2 cnd_tpbnd_tmprg2_edt3...
    cnd_tpbnd_rpt_txt cnd_tpbnd_rpt_mn...
    cnd_tpbnd_absrpmd_txt cnd_tpbnd_absrpmd_mn...
    cnd_tpbnd_flm_txt cnd_tpbnd_flm_mn...
    cnd_tpbnd_ignmssflx_txt cnd_tpbnd_ignmssflx_mn_1...
    cnd_tpbnd_ignmssflx_edt_1...
    cnd_tpbnd_addimf_pshbttn cnd_tpbnd_remimf_pshbttn...
    cnd_tpbnd_outtmp_txt cnd_tpbnd_outtmp_edt...
    cnd_tpbnd_convcoeff2_txt cnd_tpbnd_convcoeff2_edt...
    cnd_tpbnd_rd_txt cnd_tpbnd_rd_edt...
    cnd_tpbnd_scrll_sldr

%Outer Panel
cnd_tpbnd_expnl = uipanel(...
    'Parent',cnd_objbnd_pnl,...
    'BorderType','none',...
    'Units','pixels',...
    'Position',[10 5 290 410],...
    'Tag','cnd_tpbnd_expnl');

%Inner Panel
cnd_tpbnd_inpnl = uipanel(...
    'Parent',cnd_tpbnd_expnl,...
    'BorderType','none',...
    'Units','pixels',...
    'Position',[0 0 275 410],...
    'Tag','cnd_tpbnd_inpnl');

%
cnd_tpbnd_msstrns_txt = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[5 385 80 15],...
    'Style','text',...
    'String','Mass Transport',...
    'Tag','cnd_tpbnd_msstrns_txt',...
    'TooltipString','Default');

cnd_tpbnd_msstrns_mn1 = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[90 383 50 22],...
    'Style','popupmenu',...
    'String',{'YES';'NO'},...
    'Tag','cnd_tpbnd_msstrns_mn',...
    'Callback',@cnd_tpbnd_msstrns_mn1_callback,...
    'TooltipString','Default');

cnd_tpbnd_msstrns_mn2_1 = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[5 360 60 22],...
    'Style','popupmenu',...
    'String',cmp_gas,...
    'Tag','cnd_tpbnd_msstrns_mn2_1',...
    'TooltipString','Default');

cnd_tpbnd_msstrns_mn3_1 = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[65 360 50 22],...
    'Style','popupmenu',...
    'String',{'EXP';'LIN'},...
    'Tag','cnd_tpbnd_msstrns_mn3_1',...
    'TooltipString','Default');

cnd_tpbnd_msstrns_edt1_1 = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[115 360 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_tpbnd_msstrns_edt1_1',...
    'TooltipString','Default');

cnd_tpbnd_msstrns_edt2_1 = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[165 360 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_tpbnd_msstrns_edt2_1',...
    'TooltipString','Default');

cnd_tpbnd_addmt_pshbttn = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[220 359 20 24],...
    'Style','pushbutton',...
    'String','+',...
    'Tag','cnd_tpbnd_addmt_pshbttn',...
    'FontWeight','bold',...
    'Callback',@cnd_tpbnd_addmt_pshbttn_callback,...
    'TooltipString','Default');

cnd_tpbnd_remmt_pshbttn = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[240 359 20 24],...
    'Style','pushbutton',...
    'String','-',...
    'Tag','cnd_tpbnd_remmt_pshbttn',...
    'FontWeight','bold',...
    'Callback',@cnd_tpbnd_remmt_pshbttn_callback,...
    'TooltipString','Default');

cnd_tpbnd_outtmptimep_txt = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[5 320 140 15],...
    'Style','text',...
    'String','Outside Temp Time Program',...
    'Tag','cnd_tpbnd_outtmptimep_txt',...
    'TooltipString','Default');

cnd_tpbnd_outtmptimep_edt1 = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[150 318 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_tpbnd_outtmptimep_edt1',...
    'TooltipString','Default');

cnd_tpbnd_outtmptimep_edt2 = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[200 318 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_tpbnd_outtmptimep_edt2',...
    'TooltipString','Default');

cnd_tpbnd_convcoeff1_txt = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[5 295 105 15],...
    'Style','text',...
    'String','Convection Coeffient',...
    'Tag','cnd_tpbnd_convcoeff1_txt',...
    'TooltipString','Default');

cnd_tpbnd_convcoeff1_edt = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[115 293 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_tpbnd_convcoeff1_edt',...
    'TooltipString','Default');

cnd_tpbnd_exrd_txt = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[5 250 95 15],...
    'Style','text',...
    'String','External Radiation',...
    'Tag','cnd_tpbnd_exrd_txt',...
    'TooltipString','Default');

cnd_tpbnd_exrd_mn = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[105 248 50 22],...
    'Style','popupmenu',...
    'String',{'YES';'NO'},...
    'Tag','cnd_tpbnd_exrd_mn',...
    'Callback',@cnd_tpbnd_exrd_mn_callback,...
    'TooltipString','Default');

cnd_tpbnd_tmprg1_txt = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[5 225 80 15],...
    'Style','text',...
    'String','Time Program 1',...
    'Tag','cnd_tpbnd_tmprg1_txt',...
    'TooltipString','Default');

cnd_tpbnd_tmprg1_edt1 = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[90 223 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','',...
    'TooltipString','Default');

cnd_tpbnd_tmprg1_edt2 = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[140 223 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','',...
    'TooltipString','Default');

cnd_tpbnd_tmprg1_edt3 = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[190 223 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','',...
    'TooltipString','Default');

cnd_tpbnd_tmprg2_txt = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[5 200 80 15],...
    'Style','text',...
    'String','Time Program 2',...
    'Tag','cnd_tpbnd_tmprg2_txt',...
    'TooltipString','Default');

cnd_tpbnd_tmprg2_edt1 = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[90 198 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_tpbnd_tmprg2_edt1',...
    'TooltipString','Default');

cnd_tpbnd_tmprg2_edt2 = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[140 198 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_tpbnd_tmprg2_edt2',...
    'TooltipString','Default');

cnd_tpbnd_tmprg2_edt3 = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[190 198 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_tpbnd_tmprg2_edt3',...
    'TooltipString','Default');

cnd_tpbnd_rpt_txt = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[5 175 40 15],...
    'Style','text',...
    'String','Repeat',...
    'Tag','cnd_tpbnd_rpt_txt',...
    'TooltipString','Default');

cnd_tpbnd_rpt_mn = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[50 173 50 22],...
    'Style','popupmenu',...
    'String',{'YES';'NO'},...
    'Tag','cnd_tpbnd_rpt_mn',...
    'TooltipString','Default');

cnd_tpbnd_absrpmd_txt = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[5 150 90 15],...
    'Style','text',...
    'String','Absorption Mode',...
    'Tag','cnd_tpbnd_absrpmd_txt',...
    'TooltipString','Default');

cnd_tpbnd_absrpmd_mn = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[100 148 55 22],...
    'Style','popupmenu',...
    'String',{'RAND';'MAX'},...
    'Tag','cnd_tpbnd_absrpmd_mn',...
    'TooltipString','Default');

cnd_tpbnd_flm_txt = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[5 105 35 15],...
    'Style','text',...
    'String','Flame',...
    'Tag','cnd_tpbnd_flm_txt',...
    'TooltipString','Default');

cnd_tpbnd_flm_mn = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[40 103 50 22],...
    'Style','popupmenu',...
    'String',{'YES';'NO'},...
    'Tag','cnd_tpbnd_flm_mn',...
    'Callback',@cnd_tpbnd_flm_mn_callback,...
    'TooltipString','Default');

cnd_tpbnd_ignmssflx_txt = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[5 80 105 15],...
    'Style','text',...
    'String','Ignition Mass Fluxes',...
    'Tag','cnd_tpbnd_ignmssflx_txt',...
    'TooltipString','Default');

cnd_tpbnd_ignmssflx_mn_1 = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[110 78 60 22],...
    'Style','popupmenu',...
    'String',cmp_gas,...
    'Tag','cnd_tpbnd_ignmssflx_mn_1',...
    'TooltipString','Default');

cnd_tpbnd_ignmssflx_edt_1 = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[170 78 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_tpbnd_ignmssflx_edt_1',...
    'TooltipString','Default');

cnd_tpbnd_addimf_pshbttn = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[225 77 20 24],...
    'Style','pushbutton',...
    'String','+',...
    'Tag','cnd_tpbnd_addimf_pshbttn',...
    'FontWeight','bold',...
    'Callback',@cnd_tpbnd_addimf_pshbttn_callback,...
    'TooltipString','Default');

cnd_tpbnd_remimf_pshbttn = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[245 77 20 24],...
    'Style','pushbutton',...
    'String','-',...
    'Tag','cnd_tpbnd_remimf_pshbttn',...
    'FontWeight','bold',...
    'Callback',@cnd_tpbnd_remimf_pshbttn_callback,...
    'TooltipString','Default');

cnd_tpbnd_outtmp_txt = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[5 55 110 15],...
    'Style','text',...
    'String','Outside Temperature',...
    'Tag','cnd_tpbnd_outtmp_txt',...
    'TooltipString','Default');

cnd_tpbnd_outtmp_edt = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[120 53 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_tpbnd_outtmp_edt',...
    'TooltipString','Default');

cnd_tpbnd_convcoeff2_txt = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[5 30 120 15],...
    'Style','text',...
    'String','Convection Coefficient',...
    'Tag','cnd_tpbnd_convcoeff2_txt',...
    'TooltipString','Default');

cnd_tpbnd_convcoeff2_edt = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[125 28 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_tpbnd_convcoeff2_edt',...
    'TooltipString','Default');

cnd_tpbnd_rd_txt = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[5 5 50 15],...
    'Style','text',...
    'String','Radiation',...
    'Tag','cnd_tpbnd_rd_txt',...
    'TooltipString','Default');

cnd_tpbnd_rd_edt = uicontrol(...
    'Parent',cnd_tpbnd_inpnl,...
    'Position',[60 3 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_tpbnd_rd_edt',...
    'TooltipString','Default');

cnd_tpbnd_scrll_sldr = uicontrol(...
    'Parent',cnd_tpbnd_expnl,...
    'Position',[275 0 15 410],...
    'Style','slider',...
    'Callback',@cnd_tpbnd_scrll_sldr_callback,...
    'Tag','cnd_tpbnd_scrll_sldr');

addlistener(cnd_tpbnd_scrll_sldr,'Value','PreSet',...
    @(hObject, eventdata)cnd_tpbnd_scrll_sldr_callback);
%% Bottom Boundary
global cnd_bttmbnd_expnl cnd_bttmbnd_inpnl...
    cnd_bttmbnd_msstrns_txt cnd_bttmbnd_msstrns_mn1...
    cnd_bttmbnd_msstrns_mn2_1 cnd_bttmbnd_msstrns_mn3_1...
    cnd_bttmbnd_msstrns_edt1_1 cnd_bttmbnd_msstrns_edt2_1...
    cnd_bttmbnd_addmt_pshbttn cnd_bttmbnd_remmt_pshbttn...
    cnd_bttmbnd_outtmptimep_txt cnd_bttmbnd_outtmptimep_edt1...
    cnd_bttmbnd_outtmptimep_edt2...
    cnd_bttmbnd_convcoeff1_txt cnd_bttmbnd_convcoeff1_edt...
    cnd_bttmbnd_exrd_txt cnd_bttmbnd_exrd_mn...
    cnd_bttmbnd_tmprg1_txt cnd_bttmbnd_tmprg1_edt1...
    cnd_bttmbnd_tmprg1_edt2 cnd_bttmbnd_tmprg1_edt3...
    cnd_bttmbnd_tmprg2_txt cnd_bttmbnd_tmprg2_edt1...
    cnd_bttmbnd_tmprg2_edt2 cnd_bttmbnd_tmprg2_edt3...
    cnd_bttmbnd_rpt_txt cnd_bttmbnd_rpt_mn...
    cnd_bttmbnd_absrpmd_txt cnd_bttmbnd_absrpmd_mn...
    cnd_bttmbnd_flm_txt cnd_bttmbnd_flm_mn...
    cnd_bttmbnd_ignmssflx_txt cnd_bttmbnd_ignmssflx_mn_1...
    cnd_bttmbnd_ignmssflx_edt_1...
    cnd_bttmbnd_addimf_pshbttn cnd_bttmbnd_remimf_pshbttn...
    cnd_bttmbnd_outtmp_txt cnd_bttmbnd_outtmp_edt...
    cnd_bttmbnd_convcoeff2_txt cnd_bttmbnd_convcoeff2_edt...
    cnd_bttmbnd_rd_txt cnd_bttmbnd_rd_edt...
    cnd_bttmbnd_scrll_sldr

cnd_bttmbnd_expnl = uipanel(...
    'Parent',cnd_objbnd_pnl,...
    'BorderType','none',...
    'Units','pixels',...
    'Position',[310 5 290 410],...
    'Tag','cnd_bttmbnd_expnl');

cnd_bttmbnd_inpnl = uipanel(...
    'Parent',cnd_bttmbnd_expnl,...
    'BorderType','none',...
    'Units','pixels',...
    'Position',[0 0 275 410],...
    'Tag','cnd_bttmbnd_inpnl');

cnd_bttmbnd_msstrns_txt = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[5 385 80 15],...
    'Style','text',...
    'String','Mass Transport',...
    'Tag','cnd_bttmbnd_msstrns_txt',...
    'TooltipString','Default');

cnd_bttmbnd_msstrns_mn1 = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[90 383 50 22],...
    'Style','popupmenu',...
    'String',{'YES';'NO'},...
    'Tag','cnd_bttmbnd_msstrns_mn',...
    'Callback',@cnd_bttmbnd_msstrns_mn_callback,...
    'TooltipString','Default');

cnd_bttmbnd_msstrns_mn2_1 = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[5 360 60 22],...
    'Style','popupmenu',...
    'String',cmp_gas,...
    'Tag','cnd_bttmbnd_msstrns_mn2_1',...
    'TooltipString','Default');

cnd_bttmbnd_msstrns_mn3_1 = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[65 360 50 22],...
    'Style','popupmenu',...
    'String',{'EXP';'LIN'},...
    'Tag','cnd_bttmbnd_msstrns_mn3_1',...
    'TooltipString','Default');

cnd_bttmbnd_msstrns_edt1_1 = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[115 360 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_bttmbnd_msstrns_edt1_1',...
    'TooltipString','Default');

cnd_bttmbnd_msstrns_edt2_1 = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[165 360 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_bttmbnd_msstrns_edt2_1',...
    'TooltipString','Default');

cnd_bttmbnd_addmt_pshbttn = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[220 359 20 24],...
    'Style','pushbutton',...
    'String','+',...
    'Tag','cnd_bttmbnd_addmt_pshbttn',...
    'FontWeight','bold',...
    'Callback',@cnd_bttmbnd_addmt_pshbttn_callback,...
    'TooltipString','Default');
cnd_bttmbnd_remmt_pshbttn = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[240 359 20 24],...
    'Style','pushbutton',...
    'String','-',...
    'Tag','cnd_bttmbnd_remmt_pshbttn',...
    'Callback',@cnd_bttmbnd_remmt_pshbttn_callback,...
    'FontWeight','bold',...
    'TooltipString','Default');

cnd_bttmbnd_outtmptimep_txt = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[5 320 140 15],...
    'Style','text',...
    'String','Outside Temp Time Program',...
    'Tag','cnd_bttmbnd_outtmptimep_txt',...
    'TooltipString','Default');

cnd_bttmbnd_outtmptimep_edt1 = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[150 318 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_bttmbnd_outtmptimep_edt1',...
    'TooltipString','Default');

cnd_bttmbnd_outtmptimep_edt2 = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[200 318 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_bttmbnd_outtmptimep_edt2',...
    'TooltipString','Default');

cnd_bttmbnd_convcoeff1_txt = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[5 295 105 15],...
    'Style','text',...
    'String','Convection Coeffient',...
    'Tag','cnd_bttmbnd_convcoeff1_txt',...
    'TooltipString','Default');

cnd_bttmbnd_convcoeff1_edt = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[115 293 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_bttmbnd_convcoeff1_edt',...
    'TooltipString','Default');

cnd_bttmbnd_exrd_txt = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[5 250 95 15],...
    'Style','text',...
    'String','External Radiation',...
    'Tag','cnd_bttmbnd_exrd_txt',...
    'TooltipString','Default');

cnd_bttmbnd_exrd_mn = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[105 248 50 22],...
    'Style','popupmenu',...
    'String',{'YES';'NO'},...
    'Tag','cnd_bttmbnd_exrd_mn',...
    'Callback',@cnd_bttmbnd_exrd_mn_callback,...
    'TooltipString','Default');

cnd_bttmbnd_tmprg1_txt = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[5 225 80 15],...
    'Style','text',...
    'String','Time Program 1',...
    'Tag','cnd_bttmbnd_tmprg1_txt',...
    'TooltipString','Default');

cnd_bttmbnd_tmprg1_edt1 = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[90 223 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_bttmbnd_tmprg1_edt1',...
    'TooltipString','Default');

cnd_bttmbnd_tmprg1_edt2 = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[140 223 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_bttmbnd_tmprg1_edt2',...
    'TooltipString','Default');

cnd_bttmbnd_tmprg1_edt3 = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[190 223 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_bttmbnd_tmprg1_edt3',...
    'TooltipString','Default');

cnd_bttmbnd_tmprg2_txt = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[5 200 80 15],...
    'Style','text',...
    'String','Time Program 2',...
    'Tag','cnd_bttmbnd_tmprg2_txt',...
    'TooltipString','Default');

cnd_bttmbnd_tmprg2_edt1 = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[90 198 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_bttmbnd_tmprg2_edt1',...
    'TooltipString','Default');

cnd_bttmbnd_tmprg2_edt2 = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[140 198 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_bttmbnd_tmprg2_edt2',...
    'TooltipString','Default');

cnd_bttmbnd_tmprg2_edt3 = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[190 198 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_bttmbnd_tmprg2_edt3',...
    'TooltipString','Default');

cnd_bttmbnd_rpt_txt = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[5 175 40 15],...
    'Style','text',...
    'String','Repeat',...
    'Tag','cnd_bttmbnd_rpt_txt',...
    'TooltipString','Default');

cnd_bttmbnd_rpt_mn = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[50 173 50 22],...
    'Style','popupmenu',...
    'String',{'YES';'NO'},...
    'Tag','cnd_bttmbnd_rpt_mn',...
    'TooltipString','Default');

cnd_bttmbnd_absrpmd_txt = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[5 150 90 15],...
    'Style','text',...
    'String','Absorption Mode',...
    'Tag','cnd_bttmbnd_absrpmd_txt',...
    'TooltipString','Default');

cnd_bttmbnd_absrpmd_mn = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[100 148 55 22],...
    'Style','popupmenu',...
    'String',{'RAND';'MAX'},...
    'Tag','cnd_bttmbnd_absrpmd_mn',...
    'TooltipString','Default');

cnd_bttmbnd_flm_txt = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[5 105 35 15],...
    'Style','text',...
    'String','Flame',...
    'Tag','cnd_bttmbnd_flm_txt',...
    'TooltipString','Default');

cnd_bttmbnd_flm_mn = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[40 103 50 22],...
    'Style','popupmenu',...
    'String',{'YES';'NO'},...
    'Tag','cnd_bttmbnd_flm_mn',...
    'Callback',@cnd_bttmbnd_flm_mn_callback,...
    'TooltipString','Default');

cnd_bttmbnd_ignmssflx_txt = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[5 80 105 15],...
    'Style','text',...
    'String','Ignition Mass Fluxes',...
    'Tag','cnd_bttmbnd_ignmssflx_txt',...
    'TooltipString','Default');

cnd_bttmbnd_ignmssflx_mn_1 = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[110 78 60 22],...
    'Style','popupmenu',...
    'String',cmp_gas,...
    'Tag','cnd_bttmbnd_ignmssflx_mn_1',...
    'TooltipString','Default');

cnd_bttmbnd_ignmssflx_edt_1 = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[170 78 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_bttmbnd_ignmssflx_edt_1',...
    'TooltipString','Default');

cnd_bttmbnd_addimf_pshbttn = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[225 77 20 24],...
    'Style','pushbutton',...
    'String','+',...
    'Tag','cnd_bttmbnd_addimf_pshbttn',...
    'FontWeight','bold',...
    'Callback',@cnd_bttmbnd_addimf_pshbttn_callback,...
    'TooltipString','Default');

cnd_bttmbnd_remimf_pshbttn = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[245 77 20 24],...
    'Style','pushbutton',...
    'String','-',...
    'Tag','cnd_bttmbnd_remimf_pshbttn',...
    'FontWeight','bold',...
    'Callback',@cnd_bttmbnd_remimf_pshbttn_callback,...
    'TooltipString','Default');

cnd_bttmbnd_outtmp_txt = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[5 55 110 15],...
    'Style','text',...
    'String','Outside Temperature',...
    'Tag','cnd_bttmbnd_outtmp_txt',...
    'TooltipString','Default');

cnd_bttmbnd_outtmp_edt = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[120 53 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_bttmbnd_outtmp_edt',...
    'TooltipString','Default');

cnd_bttmbnd_convcoeff2_txt = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[5 30 120 15],...
    'Style','text',...
    'String','Convection Coefficient',...
    'Tag','cnd_bttmbnd_convcoeff2_txt',...
    'TooltipString','Default');

cnd_bttmbnd_convcoeff2_edt = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[125 28 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_bttmbnd_convcoeff2_edt',...
    'TooltipString','Default');

cnd_bttmbnd_rd_txt = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[5 5 50 15],...
    'Style','text',...
    'String','Radiation',...
    'Tag','cnd_bttmbnd_rd_txt',...
    'TooltipString','Default');

cnd_bttmbnd_rd_edt = uicontrol(...
    'Parent',cnd_bttmbnd_inpnl,...
    'Position',[60 3 50 22],...
    'Style','edit',...
    'String',' ',...
    'Tag','cnd_bttmbnd_rd_edt',...
    'TooltipString','Default');

cnd_bttmbnd_scrll_sldr = uicontrol(...
    'Parent',cnd_bttmbnd_expnl,...
    'Position',[275 0 15 410],...
    'Style','slider',...
    'Callback',@cnd_bttmbnd_scrll_sldr_callback,...
    'Tag','cnd_bttmbnd_scrll_sldr');

addlistener(cnd_bttmbnd_scrll_sldr,'Value','PreSet',...
    @(hObject, eventdata)cnd_bttmbnd_scrll_sldr_callback);
%% Buttons
cnd_dimselect_pshbttn = uicontrol(...
    'Parent',cnd_custom_fig,...
    'Position',[80 450 100 30],...
    'String',['1D';'1D';'2D';'2D'],...
    'Style','popupmenu',...
    'Tag','cnd_objstrct_pshbttn',...
    'Callback',@cnd_objstrct_pshbttn_callback,...
    'TooltipString','Default');

cnd_objstrct_pshbttn = uicontrol(...
    'Parent',cnd_custom_fig,...
    'Position',[20 140 200 50],...
    'String','Object Structure',...
    'Style','pushbutton',...
    'Tag','cnd_objstrct_pshbttn',...
    'Callback',@cnd_objstrct_pshbttn_callback,...
    'TooltipString','Default');

cnd_crte_pshbttn = uicontrol(...
    'Parent',cnd_custom_fig,...
    'Position',[680 15 150 30],...
    'String','Create Conditions',...
    'Style','pushbutton',...
    'Tag','cnd_crte_pshbttn',...
    'Callback',@cnd_crte_pshbttn_callback,...
    'TooltipString','Default');

cnd_reset_pshbttn = uicontrol(...
    'Parent',cnd_custom_fig,...
    'Position',[5 5 30 10],...
    'String','Reset',...
    'Style','pushbutton',...
    'Tag','cnd_reset_pshbttn',...
    'TooltipString','Default');

cnd_help_pshbttn = uicontrol(...
    'Parent',cnd_custom_fig,...
    'Position',[50 5 30 10],...
    'String','Help',...
    'Style','pushbutton',...
    'Tag','cnd_help_pshbttn',...
    'TooltipString','Default');
%% Button Initializer
global tp_mt_val tp_imf_val...
    bb_mt_val bb_imf_val

tp_mt_val = 1;
tp_imf_val = 1;
bb_mt_val = 1;
bb_imf_val = 1;


%% ---------------- Conditions Top Boundary fuctions -----------------------
function cnd_tpbnd_msstrns_mn1_callback(hObject, eventdata, handles)
global cnd_tpbnd_msstrns_mn1...
    cnd_tpbnd_addmt_pshbttn cnd_tpbnd_remmt_pshbttn...
    tp_mt_val
%     cnd_tpbnd_outtmptimep_txt cnd_tpbnd_outtmptimep_edt1...
%     cnd_tpbnd_outtmptimep_edt2...
%     cnd_tpbnd_convcoeff1_txt cnd_tpbnd_convcoeff1_edt...
%     cnd_tpbnd_exrd_txt cnd_tpbnd_exrd_mn...
%     cnd_tpbnd_tmprg1_txt cnd_tpbnd_tmprg1_edt1...
%     cnd_tpbnd_tmprg1_edt2 cnd_tpbnd_tmprg1_edt3...
%     cnd_tpbnd_tmprg2_txt cnd_tpbnd_tmprg2_edt1...
%     cnd_tpbnd_tmprg2_edt2 cnd_tpbnd_tmprg2_edt3...
%     cnd_tpbnd_rpt_txt cnd_tpbnd_rpt_mn...
%     cnd_tpbnd_absrpmd_txt cnd_tpbnd_absrpmd_mn...
%     cnd_tpbnd_flm_txt cnd_tpbnd_flm_mn...
%     cnd_tpbnd_ignmssflx_txt cnd_tpbnd_ignmssflx_mn...
%     cnd_tpbnd_ignmssflx_edt...
%     cnd_tpbnd_addimf_pshbttn cnd_tpbnd_remimf_pshbttn...
%     cnd_tpbnd_outtmp_txt cnd_tpbnd_outtmp_edt...
%     cnd_tpbnd_convcoeff2_txt cnd_tpbnd_convcoeff2_edt...
%     cnd_tpbnd_rd_txt cnd_tpbnd_rd_edt...
%     cnd_tpbnd_scrll_sldr

list_select = cnd_tpbnd_msstrns_mn1.Value;

if list_select == 2
    
    for i = 1:tp_mt_val
        cnd_tpbnd_msstrns_mn2 = findobj(...
            'Tag',(sprintf('cnd_tpbnd_msstrns_mn2_%d',i)));
        
        cnd_tpbnd_msstrns_mn3 = findobj(...
            'Tag',(sprintf('cnd_tpbnd_msstrns_mn3_%d',i)));
        
        cnd_tpbnd_msstrns_edt1 = findobj(...
            'Tag',(sprintf('cnd_tpbnd_msstrns_edt1_%d',i)));
        
        cnd_tpbnd_msstrns_edt2 = findobj(...
            'Tag',(sprintf('cnd_tpbnd_msstrns_edt2_%d',i)));
        
        cnd_tpbnd_msstrns_mn2.Visible = 'Off';
        cnd_tpbnd_msstrns_mn3.Visible = 'Off';
        cnd_tpbnd_msstrns_edt1.Visible = 'Off';
        cnd_tpbnd_msstrns_edt2.Visible = 'Off';
    end
    
    cnd_tpbnd_addmt_pshbttn.Visible = 'Off';
    cnd_tpbnd_remmt_pshbttn.Visible = 'Off';
    
elseif list_select == 1    
    for i = 1:tp_mt_val
        cnd_tpbnd_msstrns_mn2 = findobj(...
            'Tag',(sprintf('cnd_tpbnd_msstrns_mn2_%d',i)));
        
        cnd_tpbnd_msstrns_mn3 = findobj(...
            'Tag',(sprintf('cnd_tpbnd_msstrns_mn3_%d',i)));
        
        cnd_tpbnd_msstrns_edt1 = findobj(...
            'Tag',(sprintf('cnd_tpbnd_msstrns_edt1_%d',i)));
        
        cnd_tpbnd_msstrns_edt2 = findobj(...
            'Tag',(sprintf('cnd_tpbnd_msstrns_edt2_%d',i)));
        
        cnd_tpbnd_msstrns_mn2.Visible = 'On';
        cnd_tpbnd_msstrns_mn3.Visible = 'On';
        cnd_tpbnd_msstrns_edt1.Visible = 'On';
        cnd_tpbnd_msstrns_edt2.Visible = 'On';
    end
    
    cnd_tpbnd_addmt_pshbttn.Visible = 'On';
    cnd_tpbnd_remmt_pshbttn.Visible = 'On';
    
    
end
function cnd_tpbnd_addmt_pshbttn_callback(hObject, eventdata, handles)
%%
global tp_mt_val
%% Create New Mass Transport input
cnd_tpbnd_msstrns_mn2 = findobj(...
    'Tag',sprintf('cnd_tpbnd_msstrns_mn2_%d',tp_mt_val));
cnd_tpbnd_msstrns_mn3 = findobj(...
    'Tag',sprintf('cnd_tpbnd_msstrns_mn3_%d',tp_mt_val));
cnd_tpbnd_msstrns_edt1 = findobj(...
    'Tag',sprintf('cnd_tpbnd_msstrns_edt1_%d',tp_mt_val));
cnd_tpbnd_msstrns_edt2 = findobj(...
    'Tag',sprintf('cnd_tpbnd_msstrns_edt2_%d',tp_mt_val));

tp_mt_val = tp_mt_val + 1;

uicontrol(...
    'Parent',cnd_tpbnd_msstrns_mn2.Parent,...
    'Style',cnd_tpbnd_msstrns_mn2.Style,...
    'String',cnd_tpbnd_msstrns_mn2.String,...
    'Position',cnd_tpbnd_msstrns_mn2.Position - [0 24 0 0],...
    'Tag',sprintf('cnd_tpbnd_msstrns_mn2_%d',tp_mt_val))

uicontrol(...
    'Parent',cnd_tpbnd_msstrns_mn3.Parent,...
    'Style',cnd_tpbnd_msstrns_mn3.Style,...
    'String',cnd_tpbnd_msstrns_mn3.String,...
    'Position',((cnd_tpbnd_msstrns_mn3.Position) - [0 24 0 0]),...
    'Tag',sprintf('cnd_tpbnd_msstrns_mn3_%d',tp_mt_val))

uicontrol(...
    'Parent',cnd_tpbnd_msstrns_edt1.Parent,...
    'Style',cnd_tpbnd_msstrns_edt1.Style,...
    'String',cnd_tpbnd_msstrns_edt1.String,...
    'Position',((cnd_tpbnd_msstrns_edt1.Position) - [0 24 0 0]),...
    'Tag',sprintf('cnd_tpbnd_msstrns_edt1_%d',tp_mt_val))

uicontrol(...
    'Parent',cnd_tpbnd_msstrns_edt2.Parent,...
    'Style',cnd_tpbnd_msstrns_edt2.Style,...
    'String',cnd_tpbnd_msstrns_edt2.String,...
    'Position',((cnd_tpbnd_msstrns_edt2.Position) - [0 24 0 0]),...
    'Tag',sprintf('cnd_tpbnd_msstrns_edt2_%d',tp_mt_val))
%% Reposition objects above new mass transport input
global cnd_tpbnd_inpnl...
    cnd_tpbnd_msstrns_txt cnd_tpbnd_msstrns_mn1

shift_val = 24;
position_a = [0 -shift_val 0 0];

cnd_tpbnd_msstrns_txt.Position =...
    cnd_tpbnd_msstrns_txt.Position - position_a;
cnd_tpbnd_msstrns_mn1.Position = ...
    cnd_tpbnd_msstrns_mn1.Position - position_a;

for j = 1:tp_mt_val
    msstrns_mn2 = findobj(...
        'Tag',sprintf('cnd_tpbnd_msstrns_mn2_%d',j));
    msstrns_mn3 = findobj(...
        'Tag',sprintf('cnd_tpbnd_msstrns_mn3_%d',j));
    msstrns_edt1 = findobj(...
        'Tag',sprintf('cnd_tpbnd_msstrns_edt1_%d',j));
    msstrns_edt2 = findobj(...
        'Tag',sprintf('cnd_tpbnd_msstrns_edt2_%d',j));
    
    msstrns_mn2.Position = msstrns_mn2.Position - position_a;
    msstrns_mn3.Position = msstrns_mn3.Position - position_a;
    msstrns_edt1.Position = msstrns_edt1.Position - position_a;
    msstrns_edt2.Position = msstrns_edt2.Position - position_a;
    
end

% Extend panel
position_a = [0 shift_val 0 -shift_val];
cnd_tpbnd_inpnl.Position = cnd_tpbnd_inpnl.Position - position_a;
%% Scrollbar adjusting
global cnd_tpbnd_scrll_sldr

cnd_tpbnd_inpnl.Units = 'normalized';
cnd_tpbnd_scrll_sldr.Max = cnd_tpbnd_inpnl.Position(4) - 1;
cnd_tpbnd_inpnl.Units = 'pixels';
function cnd_tpbnd_remmt_pshbttn_callback(hObject, eventdata, handles)
%% 
global cnd_tpbnd_inpnl...
    cnd_tpbnd_msstrns_txt cnd_tpbnd_msstrns_mn1...
    tp_mt_val

cnd_tpbnd_msstrns_mn2 = findobj(...
    'Tag',(sprintf('cnd_tpbnd_msstrns_mn2_%d',tp_mt_val)));
cnd_tpbnd_msstrns_mn3 = findobj(...
    'Tag',(sprintf('cnd_tpbnd_msstrns_mn3_%d',tp_mt_val)));
cnd_tpbnd_msstrns_edt1 = findobj(...
    'Tag',(sprintf('cnd_tpbnd_msstrns_edt1_%d',tp_mt_val)));
cnd_tpbnd_msstrns_edt2 = findobj(...
    'Tag',(sprintf('cnd_tpbnd_msstrns_edt2_%d',tp_mt_val)));

delete(cnd_tpbnd_msstrns_mn2);
delete(cnd_tpbnd_msstrns_mn3);
delete(cnd_tpbnd_msstrns_edt1);
delete(cnd_tpbnd_msstrns_edt2);

tp_mt_val = tp_mt_val - 1;
%% Position
shift_val = -24;
position_a = [0 -shift_val 0 0];

cnd_tpbnd_msstrns_txt.Position =...
    cnd_tpbnd_msstrns_txt.Position - position_a;
cnd_tpbnd_msstrns_mn1.Position = ...
    cnd_tpbnd_msstrns_mn1.Position - position_a;

for j = 1:tp_mt_val
    msstrns_mn2 = findobj(...
        'Tag',sprintf('cnd_tpbnd_msstrns_mn2_%d',j));
    msstrns_mn3 = findobj(...
        'Tag',sprintf('cnd_tpbnd_msstrns_mn3_%d',j));
    msstrns_edt1 = findobj(...
        'Tag',sprintf('cnd_tpbnd_msstrns_edt1_%d',j));
    msstrns_edt2 = findobj(...
        'Tag',sprintf('cnd_tpbnd_msstrns_edt2_%d',j));
    
    msstrns_mn2.Position = msstrns_mn2.Position - position_a;
    msstrns_mn3.Position = msstrns_mn3.Position - position_a;
    msstrns_edt1.Position = msstrns_edt1.Position - position_a;
    msstrns_edt2.Position = msstrns_edt2.Position - position_a;
    
end

% Extend panel
position_c = [0 shift_val 0 -shift_val];
cnd_tpbnd_inpnl.Position = cnd_tpbnd_inpnl.Position - position_c;
%% Scrollbar adjusting
global cnd_tpbnd_scrll_sldr

cnd_tpbnd_inpnl.Units = 'normalized';
cnd_tpbnd_scrll_sldr.Max = cnd_tpbnd_inpnl.Position(4) - 1;
cnd_tpbnd_inpnl.Units = 'pixels';
function cnd_tpbnd_exrd_mn_callback(hObject, eventdata, handles)
%     cnd_tpbnd_msstrns_mn2_1 cnd_tpbnd_msstrns_mn3_1...
%     cnd_tpbnd_msstrns_edt1_1 cnd_tpbnd_msstrns_edt2_1...
%     cnd_tpbnd_addmt_pshbttn cnd_tpbnd_remmt_pshbttn...
%     cnd_tpbnd_outtmptimep_txt cnd_tpbnd_outtmptimep_edt1...
%     cnd_tpbnd_outtmptimep_edt2...
%     cnd_tpbnd_convcoeff1_txt cnd_tpbnd_convcoeff1_edt...
%     cnd_tpbnd_exrd_txt
global cnd_tpbnd_exrd_mn...
    cnd_tpbnd_tmprg1_txt cnd_tpbnd_tmprg1_edt1...
    cnd_tpbnd_tmprg1_edt2 cnd_tpbnd_tmprg1_edt3...
    cnd_tpbnd_tmprg2_txt cnd_tpbnd_tmprg2_edt1...
    cnd_tpbnd_tmprg2_edt2 cnd_tpbnd_tmprg2_edt3...
    cnd_tpbnd_rpt_txt cnd_tpbnd_rpt_mn...
    cnd_tpbnd_absrpmd_txt cnd_tpbnd_absrpmd_mn...
    %     cnd_tpbnd_flm_txt cnd_tpbnd_flm_mn...
%     cnd_tpbnd_ignmssflx_txt cnd_tpbnd_ignmssflx_mn...
%     cnd_tpbnd_ignmssflx_edt...
%     cnd_tpbnd_addimf_pshbttn cnd_tpbnd_remimf_pshbttn...
%     cnd_tpbnd_outtmp_txt cnd_tpbnd_outtmp_edt...
%     cnd_tpbnd_convcoeff2_txt cnd_tpbnd_convcoeff2_edt...
%     cnd_tpbnd_rd_txt cnd_tpbnd_rd_edt...
%     cnd_tpbnd_scrll_sldr

list_select = cnd_tpbnd_exrd_mn.Value;
if list_select == 1;
    cnd_tpbnd_tmprg1_txt.Visible = 'On';
    cnd_tpbnd_tmprg1_edt1.Visible = 'On';
    cnd_tpbnd_tmprg1_edt2.Visible = 'On';
    cnd_tpbnd_tmprg1_edt3.Visible = 'On';
    cnd_tpbnd_tmprg2_txt.Visible = 'On';
    cnd_tpbnd_tmprg2_edt1.Visible = 'On';
    cnd_tpbnd_tmprg2_edt2.Visible = 'On';
    cnd_tpbnd_tmprg2_edt3.Visible = 'On';
    cnd_tpbnd_rpt_txt.Visible = 'On';
    cnd_tpbnd_rpt_mn.Visible = 'On';
    cnd_tpbnd_absrpmd_txt.Visible = 'On';
    cnd_tpbnd_absrpmd_mn.Visible = 'On';
elseif list_select == 2;
    cnd_tpbnd_tmprg1_txt.Visible = 'Off';
    cnd_tpbnd_tmprg1_edt1.Visible = 'Off';
    cnd_tpbnd_tmprg1_edt2.Visible = 'Off';
    cnd_tpbnd_tmprg1_edt3.Visible = 'Off';
    cnd_tpbnd_tmprg2_txt.Visible = 'Off';
    cnd_tpbnd_tmprg2_edt1.Visible = 'Off';
    cnd_tpbnd_tmprg2_edt2.Visible = 'Off';
    cnd_tpbnd_tmprg2_edt3.Visible = 'Off';
    cnd_tpbnd_rpt_txt.Visible = 'Off';
    cnd_tpbnd_rpt_mn.Visible = 'Off';
    cnd_tpbnd_absrpmd_txt.Visible = 'Off';
    cnd_tpbnd_absrpmd_mn.Visible = 'Off';
end
function cnd_tpbnd_flm_mn_callback(hObject, eventdata, handles)
%     cnd_tpbnd_msstrns_mn2_1 cnd_tpbnd_msstrns_mn3_1...
%     cnd_tpbnd_msstrns_edt1_1 cnd_tpbnd_msstrns_edt2_1...
%     cnd_tpbnd_addmt_pshbttn cnd_tpbnd_remmt_pshbttn...
%     cnd_tpbnd_outtmptimep_txt cnd_tpbnd_outtmptimep_edt1...
%     cnd_tpbnd_outtmptimep_edt2...
%     cnd_tpbnd_convcoeff1_txt cnd_tpbnd_convcoeff1_edt...
%     cnd_tpbnd_exrd_txt cnd_tpbnd_exrd_mn...
%     cnd_tpbnd_tmprg1_txt cnd_tpbnd_tmprg1_edt1...
%     cnd_tpbnd_tmprg1_edt2 cnd_tpbnd_tmprg1_edt3...
%     cnd_tpbnd_tmprg2_txt cnd_tpbnd_tmprg2_edt1...
%     cnd_tpbnd_tmprg2_edt2 cnd_tpbnd_tmprg2_edt3...
%     cnd_tpbnd_rpt_txt cnd_tpbnd_rpt_mn...
%     cnd_tpbnd_absrpmd_txt cnd_tpbnd_absrpmd_mn...
%     cnd_tpbnd_flm_txt...
global cnd_tpbnd_flm_mn tp_imf_val...
    cnd_tpbnd_ignmssflx_txt...
    cnd_tpbnd_addimf_pshbttn cnd_tpbnd_remimf_pshbttn...
    cnd_tpbnd_outtmp_txt cnd_tpbnd_outtmp_edt...
    cnd_tpbnd_convcoeff2_txt cnd_tpbnd_convcoeff2_edt...
    cnd_tpbnd_rd_txt cnd_tpbnd_rd_edt...

list_select = cnd_tpbnd_flm_mn.Value;
if list_select == 1
    cnd_tpbnd_ignmssflx_txt.Visible = 'On';
    
    for i = 1:tp_imf_val
        cnd_tpbnd_ignmssflx_mn = findobj(...
            'Tag',(sprintf('cnd_tpbnd_ignmssflx_mn_%d',i)));
        cnd_tpbnd_ignmssflx_edt = findobj(...
            'Tag',(sprintf('cnd_tpbnd_ignmssflx_edt_%d',i)));
        
        cnd_tpbnd_ignmssflx_mn.Visible = 'On';
        cnd_tpbnd_ignmssflx_edt.Visible = 'On';
    end
    
    cnd_tpbnd_addimf_pshbttn.Visible = 'On';
    cnd_tpbnd_remimf_pshbttn.Visible = 'On';
    cnd_tpbnd_outtmp_txt.Visible = 'On';
    cnd_tpbnd_outtmp_edt.Visible = 'On';
    cnd_tpbnd_convcoeff2_txt.Visible = 'On';
    cnd_tpbnd_convcoeff2_edt.Visible = 'On';
    cnd_tpbnd_rd_txt.Visible = 'On';
    cnd_tpbnd_rd_edt.Visible = 'On';
elseif list_select == 2
    cnd_tpbnd_ignmssflx_txt.Visible= 'Off';
    
    for i = 1:tp_imf_val
        cnd_tpbnd_ignmssflx_mn = findobj(...
            'Tag',(sprintf('cnd_tpbnd_ignmssflx_mn_%d',i)));
        cnd_tpbnd_ignmssflx_edt = findobj(...
            'Tag',(sprintf('cnd_tpbnd_ignmssflx_edt_%d',i)));
        
        cnd_tpbnd_ignmssflx_mn.Visible = 'Off';
        cnd_tpbnd_ignmssflx_edt.Visible = 'Off';
    end
    
    cnd_tpbnd_addimf_pshbttn.Visible= 'Off';
    cnd_tpbnd_remimf_pshbttn.Visible= 'Off';
    cnd_tpbnd_outtmp_txt.Visible= 'Off';
    cnd_tpbnd_outtmp_edt.Visible= 'Off';
    cnd_tpbnd_convcoeff2_txt.Visible= 'Off';
    cnd_tpbnd_convcoeff2_edt.Visible= 'Off';
    cnd_tpbnd_rd_txt.Visible= 'Off';
    cnd_tpbnd_rd_edt.Visible= 'Off';
end
function cnd_tpbnd_addimf_pshbttn_callback(hObject, eventdata, handles)
global tp_imf_val tp_mt_val

%% Create new input for Ignition mass flux
cnd_tpbnd_ignmssflx_mn = findobj(... # retrieves value of previous object
    'Tag',sprintf('cnd_tpbnd_ignmssflx_mn_%d',tp_imf_val));
cnd_tpbnd_ignmssflx_edt = findobj(... #retrieves value of previous object
    'Tag',sprintf('cnd_tpbnd_ignmssflx_edt_%d',tp_imf_val));

tp_imf_val = tp_imf_val + 1;

uicontrol(...
    'Parent',cnd_tpbnd_ignmssflx_mn.Parent,...
    'Style',cnd_tpbnd_ignmssflx_mn.Style,...
    'String',cnd_tpbnd_ignmssflx_mn.String,...
    'Position',cnd_tpbnd_ignmssflx_mn.Position - [0 24 0 0],...
    'Tag',sprintf('cnd_tpbnd_ignmssflx_mn_%d',tp_imf_val))

uicontrol(...
    'Parent',cnd_tpbnd_ignmssflx_edt.Parent,...
    'Style',cnd_tpbnd_ignmssflx_edt.Style,...
    'String',cnd_tpbnd_ignmssflx_edt.String,...
    'Position',((cnd_tpbnd_ignmssflx_edt.Position) - [0 24 0 0]),...
    'Tag',sprintf('cnd_tpbnd_ignmssflx_edt_%d',tp_imf_val))

%%
global cnd_tpbnd_inpnl...
    cnd_tpbnd_msstrns_txt cnd_tpbnd_msstrns_mn1...
    cnd_tpbnd_addmt_pshbttn cnd_tpbnd_remmt_pshbttn...
    cnd_tpbnd_outtmptimep_txt cnd_tpbnd_outtmptimep_edt1...
    cnd_tpbnd_outtmptimep_edt2...
    cnd_tpbnd_convcoeff1_txt cnd_tpbnd_convcoeff1_edt...
    cnd_tpbnd_exrd_txt cnd_tpbnd_exrd_mn...
    cnd_tpbnd_tmprg1_txt cnd_tpbnd_tmprg1_edt1...
    cnd_tpbnd_tmprg1_edt2 cnd_tpbnd_tmprg1_edt3...
    cnd_tpbnd_tmprg2_txt cnd_tpbnd_tmprg2_edt1...
    cnd_tpbnd_tmprg2_edt2 cnd_tpbnd_tmprg2_edt3...
    cnd_tpbnd_rpt_txt cnd_tpbnd_rpt_mn...
    cnd_tpbnd_absrpmd_txt cnd_tpbnd_absrpmd_mn...
    cnd_tpbnd_flm_txt cnd_tpbnd_flm_mn...
    cnd_tpbnd_ignmssflx_txt

shift_val = 24;
position_a = [0 -shift_val 0 0];

cnd_tpbnd_msstrns_txt.Position =...
    cnd_tpbnd_msstrns_txt.Position - position_a;

cnd_tpbnd_msstrns_mn1.Position = ...
    cnd_tpbnd_msstrns_mn1.Position - position_a;

for j = 1:tp_mt_val
    msstrns_mn2 = findobj(...
        'Tag',sprintf('cnd_tpbnd_msstrns_mn2_%d',j));
    msstrns_mn3 = findobj(...
        'Tag',sprintf('cnd_tpbnd_msstrns_mn3_%d',j));
    msstrns_edt1 = findobj(...
        'Tag',sprintf('cnd_tpbnd_msstrns_edt1_%d',j));
    msstrns_edt2 = findobj(...
        'Tag',sprintf('cnd_tpbnd_msstrns_edt2_%d',j));
    
    msstrns_mn2.Position = msstrns_mn2.Position - position_a;
    msstrns_mn3.Position = msstrns_mn3.Position - position_a;
    msstrns_edt1.Position = msstrns_edt1.Position - position_a;
    msstrns_edt2.Position = msstrns_edt2.Position - position_a;
    
end

cnd_tpbnd_addmt_pshbttn.Position =...
    cnd_tpbnd_addmt_pshbttn.Position - position_a;

cnd_tpbnd_remmt_pshbttn.Position =...
    cnd_tpbnd_remmt_pshbttn.Position - position_a;

cnd_tpbnd_outtmptimep_txt.Position =...
    cnd_tpbnd_outtmptimep_txt.Position - position_a;

cnd_tpbnd_outtmptimep_edt1.Position =...
    cnd_tpbnd_outtmptimep_edt1.Position - position_a;

cnd_tpbnd_outtmptimep_edt2.Position =...
    cnd_tpbnd_outtmptimep_edt2.Position - position_a;

cnd_tpbnd_convcoeff1_txt.Position =...
    cnd_tpbnd_convcoeff1_txt.Position - position_a;

cnd_tpbnd_convcoeff1_edt.Position =...
    cnd_tpbnd_convcoeff1_edt.Position - position_a;

cnd_tpbnd_exrd_txt.Position =...
    cnd_tpbnd_exrd_txt.Position - position_a;

cnd_tpbnd_exrd_mn.Position =...
    cnd_tpbnd_exrd_mn.Position - position_a;

cnd_tpbnd_tmprg1_txt.Position =...
    cnd_tpbnd_tmprg1_txt.Position - position_a;

cnd_tpbnd_tmprg1_edt1.Position =...
    cnd_tpbnd_tmprg1_edt1.Position - position_a;

cnd_tpbnd_tmprg1_edt2.Position =...
    cnd_tpbnd_tmprg1_edt2.Position - position_a;

cnd_tpbnd_tmprg1_edt3.Position =...
    cnd_tpbnd_tmprg1_edt3.Position - position_a;

cnd_tpbnd_tmprg2_txt.Position =...
    cnd_tpbnd_tmprg2_txt.Position - position_a;

cnd_tpbnd_tmprg2_edt1.Position =...
    cnd_tpbnd_tmprg2_edt1.Position - position_a;

cnd_tpbnd_tmprg2_edt2.Position =...
    cnd_tpbnd_tmprg2_edt2.Position - position_a;

cnd_tpbnd_tmprg2_edt3.Position =...
    cnd_tpbnd_tmprg2_edt3.Position - position_a;

cnd_tpbnd_rpt_txt.Position =...
    cnd_tpbnd_rpt_txt.Position - position_a;

cnd_tpbnd_rpt_mn.Position =...
    cnd_tpbnd_rpt_mn.Position - position_a;

cnd_tpbnd_absrpmd_txt.Position =...
    cnd_tpbnd_absrpmd_txt.Position - position_a;

cnd_tpbnd_absrpmd_mn.Position =...
    cnd_tpbnd_absrpmd_mn.Position - position_a;

cnd_tpbnd_flm_txt.Position =...
    cnd_tpbnd_flm_txt.Position - position_a;

cnd_tpbnd_flm_mn.Position =...
    cnd_tpbnd_flm_mn.Position - position_a;

cnd_tpbnd_ignmssflx_txt.Position =...
    cnd_tpbnd_ignmssflx_txt.Position - position_a;

for j = 1:tp_imf_val
    ignmssflx_mn = findobj(...
        'Tag',sprintf('cnd_tpbnd_ignmssflx_mn_%d',j));
    ignmssflx_edt = findobj(...
        'Tag',sprintf('cnd_tpbnd_ignmssflx_edt_%d',j));
    
    ignmssflx_mn.Position = ignmssflx_mn.Position - position_a;
    ignmssflx_edt.Position = ignmssflx_edt.Position - position_a;
    
end

% Extend panel
position_a = [0 shift_val 0 -shift_val];
cnd_tpbnd_inpnl.Position = cnd_tpbnd_inpnl.Position - position_a;

%% Scrollbar adjusting
global cnd_tpbnd_scrll_sldr

cnd_tpbnd_inpnl.Units = 'normalized';
cnd_tpbnd_scrll_sldr.Max = cnd_tpbnd_inpnl.Position(4) - 1;
cnd_tpbnd_scrll_sldr.Value = 0;
cnd_tpbnd_inpnl.Position(2) = 0;
cnd_tpbnd_inpnl.Units = 'pixels';
function cnd_tpbnd_remimf_pshbttn_callback(hObject, eventdata, handles)
global tp_imf_val tp_mt_val
%%
cnd_tpbnd_ignmssflx_mn = findobj(...
    'Tag',(sprintf('cnd_tpbnd_ignmssflx_mn_%d',tp_imf_val)));
cnd_tpbnd_ignmssflx_edt = findobj(...
    'Tag',(sprintf('cnd_tpbnd_ignmssflx_edt_%d',tp_imf_val)));

delete(cnd_tpbnd_ignmssflx_mn);
delete(cnd_tpbnd_ignmssflx_edt);

tp_imf_val = tp_imf_val - 1;
%%
global cnd_tpbnd_inpnl cnd_tpbnd_msstrns_txt cnd_tpbnd_msstrns_mn1...
    cnd_tpbnd_addmt_pshbttn cnd_tpbnd_remmt_pshbttn...
    cnd_tpbnd_outtmptimep_txt cnd_tpbnd_outtmptimep_edt1...
    cnd_tpbnd_outtmptimep_edt2...
    cnd_tpbnd_convcoeff1_txt cnd_tpbnd_convcoeff1_edt...
    cnd_tpbnd_exrd_txt cnd_tpbnd_exrd_mn...
    cnd_tpbnd_tmprg1_txt cnd_tpbnd_tmprg1_edt1...
    cnd_tpbnd_tmprg1_edt2 cnd_tpbnd_tmprg1_edt3...
    cnd_tpbnd_tmprg2_txt cnd_tpbnd_tmprg2_edt1...
    cnd_tpbnd_tmprg2_edt2 cnd_tpbnd_tmprg2_edt3...
    cnd_tpbnd_rpt_txt cnd_tpbnd_rpt_mn...
    cnd_tpbnd_absrpmd_txt cnd_tpbnd_absrpmd_mn...
    cnd_tpbnd_flm_txt cnd_tpbnd_flm_mn...
    cnd_tpbnd_ignmssflx_txt...
    
shift_val = -24;
position_a = [0 -shift_val 0 0];

cnd_tpbnd_msstrns_txt.Position =...
    cnd_tpbnd_msstrns_txt.Position - position_a;

cnd_tpbnd_msstrns_mn1.Position = ...
    cnd_tpbnd_msstrns_mn1.Position - position_a;

for j = 1:tp_mt_val
    msstrns_mn2 = findobj(...
        'Tag',sprintf('cnd_tpbnd_msstrns_mn2_%d',j));
    msstrns_mn3 = findobj(...
        'Tag',sprintf('cnd_tpbnd_msstrns_mn3_%d',j));
    msstrns_edt1 = findobj(...
        'Tag',sprintf('cnd_tpbnd_msstrns_edt1_%d',j));
    msstrns_edt2 = findobj(...
        'Tag',sprintf('cnd_tpbnd_msstrns_edt2_%d',j));
    
    msstrns_mn2.Position = msstrns_mn2.Position - position_a;
    msstrns_mn3.Position = msstrns_mn3.Position - position_a;
    msstrns_edt1.Position = msstrns_edt1.Position - position_a;
    msstrns_edt2.Position = msstrns_edt2.Position - position_a;
    
end

cnd_tpbnd_addmt_pshbttn.Position =...
    cnd_tpbnd_addmt_pshbttn.Position - position_a;

cnd_tpbnd_remmt_pshbttn.Position =...
    cnd_tpbnd_remmt_pshbttn.Position - position_a;

cnd_tpbnd_outtmptimep_txt.Position =...
    cnd_tpbnd_outtmptimep_txt.Position - position_a;

cnd_tpbnd_outtmptimep_edt1.Position =...
    cnd_tpbnd_outtmptimep_edt1.Position - position_a;

cnd_tpbnd_outtmptimep_edt2.Position =...
    cnd_tpbnd_outtmptimep_edt2.Position - position_a;

cnd_tpbnd_convcoeff1_txt.Position =...
    cnd_tpbnd_convcoeff1_txt.Position - position_a;

cnd_tpbnd_convcoeff1_edt.Position =...
    cnd_tpbnd_convcoeff1_edt.Position - position_a;

cnd_tpbnd_exrd_txt.Position =...
    cnd_tpbnd_exrd_txt.Position - position_a;

cnd_tpbnd_exrd_mn.Position =...
    cnd_tpbnd_exrd_mn.Position - position_a;

cnd_tpbnd_tmprg1_txt.Position =...
    cnd_tpbnd_tmprg1_txt.Position - position_a;

cnd_tpbnd_tmprg1_edt1.Position =...
    cnd_tpbnd_tmprg1_edt1.Position - position_a;

cnd_tpbnd_tmprg1_edt2.Position =...
    cnd_tpbnd_tmprg1_edt2.Position - position_a;

cnd_tpbnd_tmprg1_edt3.Position =...
    cnd_tpbnd_tmprg1_edt3.Position - position_a;

cnd_tpbnd_tmprg2_txt.Position =...
    cnd_tpbnd_tmprg2_txt.Position - position_a;

cnd_tpbnd_tmprg2_edt1.Position =...
    cnd_tpbnd_tmprg2_edt1.Position - position_a;

cnd_tpbnd_tmprg2_edt2.Position =...
    cnd_tpbnd_tmprg2_edt2.Position - position_a;

cnd_tpbnd_tmprg2_edt3.Position =...
    cnd_tpbnd_tmprg2_edt3.Position - position_a;

cnd_tpbnd_rpt_txt.Position =...
    cnd_tpbnd_rpt_txt.Position - position_a;

cnd_tpbnd_rpt_mn.Position =...
    cnd_tpbnd_rpt_mn.Position - position_a;

cnd_tpbnd_absrpmd_txt.Position =...
    cnd_tpbnd_absrpmd_txt.Position - position_a;

cnd_tpbnd_absrpmd_mn.Position =...
    cnd_tpbnd_absrpmd_mn.Position - position_a;

cnd_tpbnd_flm_txt.Position =...
    cnd_tpbnd_flm_txt.Position - position_a;

cnd_tpbnd_flm_mn.Position =...
    cnd_tpbnd_flm_mn.Position - position_a;

cnd_tpbnd_ignmssflx_txt.Position =...
    cnd_tpbnd_ignmssflx_txt.Position - position_a;

for j = 1:tp_imf_val
    ignmssflx_mn = findobj(...
        'Tag',sprintf('cnd_tpbnd_ignmssflx_mn_%d',j));
    ignmssflx_edt = findobj(...
        'Tag',sprintf('cnd_tpbnd_ignmssflx_edt_%d',j));
    
    ignmssflx_mn.Position = ignmssflx_mn.Position - position_a;
    ignmssflx_edt.Position = ignmssflx_edt.Position - position_a;
    
end

% Extend panel
position_a = [0 shift_val 0 -shift_val];
cnd_tpbnd_inpnl.Position = cnd_tpbnd_inpnl.Position - position_a;
%% Scrollbar adjusting
global cnd_tpbnd_scrll_sldr

cnd_tpbnd_inpnl.Units = 'normalized';
cnd_tpbnd_scrll_sldr.Max = cnd_tpbnd_inpnl.Position(4) - 1;
cnd_tpbnd_scrll_sldr.Value = 0;
cnd_tpbnd_inpnl.Position(2) = 0;
cnd_tpbnd_inpnl.Units = 'pixels';
function cnd_tpbnd_scrll_sldr_callback(hObject, eventdata, handles)
global cnd_tpbnd_scrll_sldr cnd_tpbnd_inpnl

cnd_tpbnd_inpnl.Units = 'normalized';
cnd_tpbnd_inpnl.Position(2) = -(cnd_tpbnd_scrll_sldr.Value);
display(cnd_tpbnd_inpnl.Position);
cnd_tpbnd_inpnl.Units = 'pixels';

%% ---------------- Conditions Bottom Boundary functions -------------------
function cnd_bttmbnd_msstrns_mn_callback(hObject, eventdata, handles)
global cnd_bttmbnd_msstrns_mn1...
    cnd_bttmbnd_addmt_pshbttn cnd_bttmbnd_remmt_pshbttn...
    bb_mt_val
%     cnd_bttmbnd_outtmptimep_txt cnd_bttmbnd_outtmptimep_edt1...
%     cnd_bttmbnd_outtmptimep_edt2...
%     cnd_bttmbnd_convcoeff1_txt cnd_bttmbnd_convcoeff1_edt...
%     cnd_bttmbnd_exrd_txt cnd_bttmbnd_exrd_mn...
%     cnd_bttmbnd_tmprg1_txt cnd_bttmbnd_tmprg1_edt1...
%     cnd_bttmbnd_tmprg1_edt2 cnd_bttmbnd_tmprg1_edt3...
%     cnd_bttmbnd_tmprg2_txt cnd_bttmbnd_tmprg2_edt1...
%     cnd_bttmbnd_tmprg2_edt2 cnd_bttmbnd_tmprg2_edt3...
%     cnd_bttmbnd_rpt_txt cnd_bttmbnd_rpt_mn...
%     cnd_bttmbnd_absrpmd_txt cnd_bttmbnd_absrpmd_mn...
%     cnd_bttmbnd_flm_txt cnd_bttmbnd_flm_mn...
%     cnd_bttmbnd_ignmssflx_txt cnd_bttmbnd_ignmssflx_mn...
%     cnd_bttmbnd_ignmssflx_edt...
%     cnd_bttmbnd_addimf_pshbttn cnd_bttmbnd_remimf_pshbttn...
%     cnd_bttmbnd_outtmp_txt cnd_bttmbnd_outtmp_edt...
%     cnd_bttmbnd_convcoeff2_txt cnd_bttmbnd_convcoeff2_edt...
%     cnd_bttmbnd_rd_txt cnd_bttmbnd_rd_edt...
%     cnd_bttmbnd_scrll_sldr

list_select = cnd_bttmbnd_msstrns_mn1.Value;

if list_select == 2
    
    for i = 1:bb_mt_val
        cnd_bttmbnd_msstrns_mn2 = findobj(...
            'Tag',(sprintf('cnd_bttmbnd_msstrns_mn2_%d',i)));
        
        cnd_bttmbnd_msstrns_mn3 = findobj(...
            'Tag',(sprintf('cnd_bttmbnd_msstrns_mn3_%d',i)));
        
        cnd_bttmbnd_msstrns_edt1 = findobj(...
            'Tag',(sprintf('cnd_bttmbnd_msstrns_edt1_%d',i)));
        
        cnd_bttmbnd_msstrns_edt2 = findobj(...
            'Tag',(sprintf('cnd_bttmbnd_msstrns_edt2_%d',i)));
        
        cnd_bttmbnd_msstrns_mn2.Visible = 'Off';
        cnd_bttmbnd_msstrns_mn3.Visible = 'Off';
        cnd_bttmbnd_msstrns_edt1.Visible = 'Off';
        cnd_bttmbnd_msstrns_edt2.Visible = 'Off';
    end
    
    cnd_bttmbnd_addmt_pshbttn.Visible = 'Off';
    cnd_bttmbnd_remmt_pshbttn.Visible = 'Off';
    
elseif list_select == 1    
    for i = 1:bb_mt_val
        cnd_bttmbnd_msstrns_mn2 = findobj(...
            'Tag',(sprintf('cnd_bttmbnd_msstrns_mn2_%d',i)));
        
        cnd_bttmbnd_msstrns_mn3 = findobj(...
            'Tag',(sprintf('cnd_bttmbnd_msstrns_mn3_%d',i)));
        
        cnd_bttmbnd_msstrns_edt1 = findobj(...
            'Tag',(sprintf('cnd_bttmbnd_msstrns_edt1_%d',i)));
        
        cnd_bttmbnd_msstrns_edt2 = findobj(...
            'Tag',(sprintf('cnd_bttmbnd_msstrns_edt2_%d',i)));
        
        cnd_bttmbnd_msstrns_mn2.Visible = 'On';
        cnd_bttmbnd_msstrns_mn3.Visible = 'On';
        cnd_bttmbnd_msstrns_edt1.Visible = 'On';
        cnd_bttmbnd_msstrns_edt2.Visible = 'On';
    end
    
    cnd_bttmbnd_addmt_pshbttn.Visible = 'On';
    cnd_bttmbnd_remmt_pshbttn.Visible = 'On';
    
    
end
function cnd_bttmbnd_addmt_pshbttn_callback(hObject, eventdata, handles)
global bb_mt_val
%% Create New Mass Transport input
cnd_bttmbnd_msstrns_mn2 = findobj(...
    'Tag',sprintf('cnd_bttmbnd_msstrns_mn2_%d',bb_mt_val));
cnd_bttmbnd_msstrns_mn3 = findobj(...
    'Tag',sprintf('cnd_bttmbnd_msstrns_mn3_%d',bb_mt_val));
cnd_bttmbnd_msstrns_edt1 = findobj(...
    'Tag',sprintf('cnd_bttmbnd_msstrns_edt1_%d',bb_mt_val));
cnd_bttmbnd_msstrns_edt2 = findobj(...
    'Tag',sprintf('cnd_bttmbnd_msstrns_edt2_%d',bb_mt_val));

bb_mt_val = bb_mt_val + 1;

uicontrol(...
    'Parent',cnd_bttmbnd_msstrns_mn2.Parent,...
    'Style',cnd_bttmbnd_msstrns_mn2.Style,...
    'String',cnd_bttmbnd_msstrns_mn2.String,...
    'Position',cnd_bttmbnd_msstrns_mn2.Position - [0 24 0 0],...
    'Tag',sprintf('cnd_bttmbnd_msstrns_mn2_%d',bb_mt_val))

uicontrol(...
    'Parent',cnd_bttmbnd_msstrns_mn3.Parent,...
    'Style',cnd_bttmbnd_msstrns_mn3.Style,...
    'String',cnd_bttmbnd_msstrns_mn3.String,...
    'Position',((cnd_bttmbnd_msstrns_mn3.Position) - [0 24 0 0]),...
    'Tag',sprintf('cnd_bttmbnd_msstrns_mn3_%d',bb_mt_val))

uicontrol(...
    'Parent',cnd_bttmbnd_msstrns_edt1.Parent,...
    'Style',cnd_bttmbnd_msstrns_edt1.Style,...
    'String',cnd_bttmbnd_msstrns_edt1.String,...
    'Position',((cnd_bttmbnd_msstrns_edt1.Position) - [0 24 0 0]),...
    'Tag',sprintf('cnd_bttmbnd_msstrns_edt1_%d',bb_mt_val))

uicontrol(...
    'Parent',cnd_bttmbnd_msstrns_edt2.Parent,...
    'Style',cnd_bttmbnd_msstrns_edt2.Style,...
    'String',cnd_bttmbnd_msstrns_edt2.String,...
    'Position',((cnd_bttmbnd_msstrns_edt2.Position) - [0 24 0 0]),...
    'Tag',sprintf('cnd_bttmbnd_msstrns_edt2_%d',bb_mt_val))
%% Reposition objects above new mass transport input
global cnd_bttmbnd_inpnl...
    cnd_bttmbnd_msstrns_txt cnd_bttmbnd_msstrns_mn1

shift_val = 24;
position_a = [0 -shift_val 0 0];

cnd_bttmbnd_msstrns_txt.Position =...
    cnd_bttmbnd_msstrns_txt.Position - position_a;
cnd_bttmbnd_msstrns_mn1.Position = ...
    cnd_bttmbnd_msstrns_mn1.Position - position_a;

for j = 1:bb_mt_val
    msstrns_mn2 = findobj(...
        'Tag',sprintf('cnd_bttmbnd_msstrns_mn2_%d',j));
    msstrns_mn3 = findobj(...
        'Tag',sprintf('cnd_bttmbnd_msstrns_mn3_%d',j));
    msstrns_edt1 = findobj(...
        'Tag',sprintf('cnd_bttmbnd_msstrns_edt1_%d',j));
    msstrns_edt2 = findobj(...
        'Tag',sprintf('cnd_bttmbnd_msstrns_edt2_%d',j));
    
    msstrns_mn2.Position = msstrns_mn2.Position - position_a;
    msstrns_mn3.Position = msstrns_mn3.Position - position_a;
    msstrns_edt1.Position = msstrns_edt1.Position - position_a;
    msstrns_edt2.Position = msstrns_edt2.Position - position_a;
    
end

% Extend panel
position_a = [0 shift_val 0 -shift_val];
cnd_bttmbnd_inpnl.Position = cnd_bttmbnd_inpnl.Position - position_a;
%% Scrollbar adjusting
global cnd_bttmbnd_scrll_sldr

cnd_bttmbnd_inpnl.Units = 'normalized';
cnd_bttmbnd_scrll_sldr.Max = cnd_bttmbnd_inpnl.Position(4) - 1;
cnd_bttmbnd_scrll_sldr.Value = 0;
cnd_bttmbnd_inpnl.Units = 'pixels';
function cnd_bttmbnd_remmt_pshbttn_callback(hObject, eventdata, handles)
%%
global cnd_bttmbnd_inpnl...
    cnd_bttmbnd_msstrns_txt cnd_bttmbnd_msstrns_mn1...
    bb_mt_val


cnd_bttmbnd_msstrns_mn2 = findobj(...
    'Tag',(sprintf('cnd_bttmbnd_msstrns_mn2_%d',bb_mt_val)));
cnd_bttmbnd_msstrns_mn3 = findobj(...
    'Tag',(sprintf('cnd_bttmbnd_msstrns_mn3_%d',bb_mt_val)));
cnd_bttmbnd_msstrns_edt1 = findobj(...
    'Tag',(sprintf('cnd_bttmbnd_msstrns_edt1_%d',bb_mt_val)));
cnd_bttmbnd_msstrns_edt2 = findobj(...
    'Tag',(sprintf('cnd_bttmbnd_msstrns_edt2_%d',bb_mt_val)));

delete(cnd_bttmbnd_msstrns_mn2);
delete(cnd_bttmbnd_msstrns_mn3);
delete(cnd_bttmbnd_msstrns_edt1);
delete(cnd_bttmbnd_msstrns_edt2);

bb_mt_val = bb_mt_val - 1;
%% Position

shift_val = -24;
position_a = [0 -shift_val 0 0];

cnd_bttmbnd_msstrns_txt.Position =...
    cnd_bttmbnd_msstrns_txt.Position - position_a;
cnd_bttmbnd_msstrns_mn1.Position = ...
    cnd_bttmbnd_msstrns_mn1.Position - position_a;

for j = 1:bb_mt_val
    msstrns_mn2 = findobj(...
        'Tag',sprintf('cnd_bttmbnd_msstrns_mn2_%d',j));
    msstrns_mn3 = findobj(...
        'Tag',sprintf('cnd_bttmbnd_msstrns_mn3_%d',j));
    msstrns_edt1 = findobj(...
        'Tag',sprintf('cnd_bttmbnd_msstrns_edt1_%d',j));
    msstrns_edt2 = findobj(...
        'Tag',sprintf('cnd_bttmbnd_msstrns_edt2_%d',j));
    
    msstrns_mn2.Position = msstrns_mn2.Position - position_a;
    msstrns_mn3.Position = msstrns_mn3.Position - position_a;
    msstrns_edt1.Position = msstrns_edt1.Position - position_a;
    msstrns_edt2.Position = msstrns_edt2.Position - position_a;
    
end

% Extend panel
position_c = [0 shift_val 0 -shift_val];
cnd_bttmbnd_inpnl.Position = cnd_bttmbnd_inpnl.Position - position_c;
%% Scrollbar adjusting
global cnd_bttmbnd_scrll_sldr

cnd_bttmbnd_inpnl.Units = 'normalized';
cnd_bttmbnd_scrll_sldr.Max = cnd_bttmbnd_inpnl.Position(4) - 1;
cnd_bttmbnd_scrll_sldr.Value = 0;
cnd_bttmbnd_inpnl.Units = 'pixels';
function cnd_bttmbnd_exrd_mn_callback(hObject, eventdata, handles)
%     cnd_bttmbnd_msstrns_mn2_1 cnd_bttmbnd_msstrns_mn3_1...
%     cnd_bttmbnd_msstrns_edt1_1 cnd_bttmbnd_msstrns_edt2_1...
%     cnd_bttmbnd_addmt_pshbttn cnd_bttmbnd_remmt_pshbttn...
%     cnd_bttmbnd_outtmptimep_txt cnd_bttmbnd_outtmptimep_edt1...
%     cnd_bttmbnd_outtmptimep_edt2...
%     cnd_bttmbnd_convcoeff1_txt cnd_bttmbnd_convcoeff1_edt...
%     cnd_bttmbnd_exrd_txt
global cnd_bttmbnd_exrd_mn...
    cnd_bttmbnd_tmprg1_txt cnd_bttmbnd_tmprg1_edt1...
    cnd_bttmbnd_tmprg1_edt2 cnd_bttmbnd_tmprg1_edt3...
    cnd_bttmbnd_tmprg2_txt cnd_bttmbnd_tmprg2_edt1...
    cnd_bttmbnd_tmprg2_edt2 cnd_bttmbnd_tmprg2_edt3...
    cnd_bttmbnd_rpt_txt cnd_bttmbnd_rpt_mn...
    cnd_bttmbnd_absrpmd_txt cnd_bttmbnd_absrpmd_mn...
    %     cnd_bttmbnd_flm_txt cnd_bttmbnd_flm_mn...
%     cnd_bttmbnd_ignmssflx_txt cnd_bttmbnd_ignmssflx_mn...
%     cnd_bttmbnd_ignmssflx_edt...
%     cnd_bttmbnd_addimf_pshbttn cnd_bttmbnd_remimf_pshbttn...
%     cnd_bttmbnd_outtmp_txt cnd_bttmbnd_outtmp_edt...
%     cnd_bttmbnd_convcoeff2_txt cnd_bttmbnd_convcoeff2_edt...
%     cnd_bttmbnd_rd_txt cnd_bttmbnd_rd_edt...
%     cnd_bttmbnd_scrll_sldr

list_select = cnd_bttmbnd_exrd_mn.Value;
if list_select == 1;
    cnd_bttmbnd_tmprg1_txt.Visible = 'On';
    cnd_bttmbnd_tmprg1_edt1.Visible = 'On';
    cnd_bttmbnd_tmprg1_edt2.Visible = 'On';
    cnd_bttmbnd_tmprg1_edt3.Visible = 'On';
    cnd_bttmbnd_tmprg2_txt.Visible = 'On';
    cnd_bttmbnd_tmprg2_edt1.Visible = 'On';
    cnd_bttmbnd_tmprg2_edt2.Visible = 'On';
    cnd_bttmbnd_tmprg2_edt3.Visible = 'On';
    cnd_bttmbnd_rpt_txt.Visible = 'On';
    cnd_bttmbnd_rpt_mn.Visible = 'On';
    cnd_bttmbnd_absrpmd_txt.Visible = 'On';
    cnd_bttmbnd_absrpmd_mn.Visible = 'On';
elseif list_select == 2;
    cnd_bttmbnd_tmprg1_txt.Visible = 'Off';
    cnd_bttmbnd_tmprg1_edt1.Visible = 'Off';
    cnd_bttmbnd_tmprg1_edt2.Visible = 'Off';
    cnd_bttmbnd_tmprg1_edt3.Visible = 'Off';
    cnd_bttmbnd_tmprg2_txt.Visible = 'Off';
    cnd_bttmbnd_tmprg2_edt1.Visible = 'Off';
    cnd_bttmbnd_tmprg2_edt2.Visible = 'Off';
    cnd_bttmbnd_tmprg2_edt3.Visible = 'Off';
    cnd_bttmbnd_rpt_txt.Visible = 'Off';
    cnd_bttmbnd_rpt_mn.Visible = 'Off';
    cnd_bttmbnd_absrpmd_txt.Visible = 'Off';
    cnd_bttmbnd_absrpmd_mn.Visible = 'Off';
end
function cnd_bttmbnd_flm_mn_callback(hObject, eventdata, handles)
%     cnd_bttmbnd_msstrns_mn2_1 cnd_bttmbnd_msstrns_mn3_1...
%     cnd_bttmbnd_msstrns_edt1_1 cnd_bttmbnd_msstrns_edt2_1...
%     cnd_bttmbnd_addmt_pshbttn cnd_bttmbnd_remmt_pshbttn...
%     cnd_bttmbnd_outtmptimep_txt cnd_bttmbnd_outtmptimep_edt1...
%     cnd_bttmbnd_outtmptimep_edt2...
%     cnd_bttmbnd_convcoeff1_txt cnd_bttmbnd_convcoeff1_edt...
%     cnd_bttmbnd_exrd_txt cnd_bttmbnd_exrd_mn...
%     cnd_bttmbnd_tmprg1_txt cnd_bttmbnd_tmprg1_edt1...
%     cnd_bttmbnd_tmprg1_edt2 cnd_bttmbnd_tmprg1_edt3...
%     cnd_bttmbnd_tmprg2_txt cnd_bttmbnd_tmprg2_edt1...
%     cnd_bttmbnd_tmprg2_edt2 cnd_bttmbnd_tmprg2_edt3...
%     cnd_bttmbnd_rpt_txt cnd_bttmbnd_rpt_mn...
%     cnd_bttmbnd_absrpmd_txt cnd_bttmbnd_absrpmd_mn...
%     cnd_bttmbnd_flm_txt...
global cnd_bttmbnd_flm_mn bb_imf_val...
    cnd_bttmbnd_ignmssflx_txt...
    cnd_bttmbnd_addimf_pshbttn cnd_bttmbnd_remimf_pshbttn...
    cnd_bttmbnd_outtmp_txt cnd_bttmbnd_outtmp_edt...
    cnd_bttmbnd_convcoeff2_txt cnd_bttmbnd_convcoeff2_edt...
    cnd_bttmbnd_rd_txt cnd_bttmbnd_rd_edt...

list_select = cnd_bttmbnd_flm_mn.Value;
if list_select == 1
    cnd_bttmbnd_ignmssflx_txt.Visible = 'On';
    
    for i = 1:bb_imf_val
        cnd_bttmbnd_ignmssflx_mn = findobj(...
            'Tag',(sprintf('cnd_bttmbnd_ignmssflx_mn_%d',i)));
        cnd_bttmbnd_ignmssflx_edt = findobj(...
            'Tag',(sprintf('cnd_bttmbnd_ignmssflx_edt_%d',i)));
        
        cnd_bttmbnd_ignmssflx_mn.Visible = 'On';
        cnd_bttmbnd_ignmssflx_edt.Visible = 'On';
    end
    
    cnd_bttmbnd_addimf_pshbttn.Visible = 'On';
    cnd_bttmbnd_remimf_pshbttn.Visible = 'On';
    cnd_bttmbnd_outtmp_txt.Visible = 'On';
    cnd_bttmbnd_outtmp_edt.Visible = 'On';
    cnd_bttmbnd_convcoeff2_txt.Visible = 'On';
    cnd_bttmbnd_convcoeff2_edt.Visible = 'On';
    cnd_bttmbnd_rd_txt.Visible = 'On';
    cnd_bttmbnd_rd_edt.Visible = 'On';
elseif list_select == 2
    cnd_bttmbnd_ignmssflx_txt.Visible= 'Off';
    
    for i = 1:bb_imf_val
        cnd_bttmbnd_ignmssflx_mn = findobj(...
            'Tag',(sprintf('cnd_bttmbnd_ignmssflx_mn_%d',i)));
        cnd_bttmbnd_ignmssflx_edt = findobj(...
            'Tag',(sprintf('cnd_bttmbnd_ignmssflx_edt_%d',i)));
        
        cnd_bttmbnd_ignmssflx_mn.Visible = 'Off';
        cnd_bttmbnd_ignmssflx_edt.Visible = 'Off';
    end
    
    cnd_bttmbnd_addimf_pshbttn.Visible= 'Off';
    cnd_bttmbnd_remimf_pshbttn.Visible= 'Off';
    cnd_bttmbnd_outtmp_txt.Visible= 'Off';
    cnd_bttmbnd_outtmp_edt.Visible= 'Off';
    cnd_bttmbnd_convcoeff2_txt.Visible= 'Off';
    cnd_bttmbnd_convcoeff2_edt.Visible= 'Off';
    cnd_bttmbnd_rd_txt.Visible= 'Off';
    cnd_bttmbnd_rd_edt.Visible= 'Off';
end
function cnd_bttmbnd_addimf_pshbttn_callback(hObject, eventdata, handles)
global bb_imf_val bb_mt_val

%% Create new input for Ignition mass flux
cnd_bttmbnd_ignmssflx_mn = findobj(... # retrieves value of previous object
    'Tag',sprintf('cnd_bttmbnd_ignmssflx_mn_%d',bb_imf_val));
cnd_bttmbnd_ignmssflx_edt = findobj(... #retrieves value of previous object
    'Tag',sprintf('cnd_bttmbnd_ignmssflx_edt_%d',bb_imf_val));

bb_imf_val = bb_imf_val + 1;

uicontrol(...
    'Parent',cnd_bttmbnd_ignmssflx_mn.Parent,...
    'Style',cnd_bttmbnd_ignmssflx_mn.Style,...
    'String',cnd_bttmbnd_ignmssflx_mn.String,...
    'Position',cnd_bttmbnd_ignmssflx_mn.Position - [0 24 0 0],...
    'Tag',sprintf('cnd_bttmbnd_ignmssflx_mn_%d',bb_imf_val))

uicontrol(...
    'Parent',cnd_bttmbnd_ignmssflx_edt.Parent,...
    'Style',cnd_bttmbnd_ignmssflx_edt.Style,...
    'String',cnd_bttmbnd_ignmssflx_edt.String,...
    'Position',((cnd_bttmbnd_ignmssflx_edt.Position) - [0 24 0 0]),...
    'Tag',sprintf('cnd_bttmbnd_ignmssflx_edt_%d',bb_imf_val))
%%
global cnd_bttmbnd_inpnl...
    cnd_bttmbnd_msstrns_txt cnd_bttmbnd_msstrns_mn1...
    cnd_bttmbnd_addmt_pshbttn cnd_bttmbnd_remmt_pshbttn...
    cnd_bttmbnd_outtmptimep_txt cnd_bttmbnd_outtmptimep_edt1...
    cnd_bttmbnd_outtmptimep_edt2...
    cnd_bttmbnd_convcoeff1_txt cnd_bttmbnd_convcoeff1_edt...
    cnd_bttmbnd_exrd_txt cnd_bttmbnd_exrd_mn...
    cnd_bttmbnd_tmprg1_txt cnd_bttmbnd_tmprg1_edt1...
    cnd_bttmbnd_tmprg1_edt2 cnd_bttmbnd_tmprg1_edt3...
    cnd_bttmbnd_tmprg2_txt cnd_bttmbnd_tmprg2_edt1...
    cnd_bttmbnd_tmprg2_edt2 cnd_bttmbnd_tmprg2_edt3...
    cnd_bttmbnd_rpt_txt cnd_bttmbnd_rpt_mn...
    cnd_bttmbnd_absrpmd_txt cnd_bttmbnd_absrpmd_mn...
    cnd_bttmbnd_flm_txt cnd_bttmbnd_flm_mn...
    cnd_bttmbnd_ignmssflx_txt

shift_val = 24;
position_a = [0 -shift_val 0 0];

cnd_bttmbnd_msstrns_txt.Position =...
    cnd_bttmbnd_msstrns_txt.Position - position_a;

cnd_bttmbnd_msstrns_mn1.Position = ...
    cnd_bttmbnd_msstrns_mn1.Position - position_a;

for j = 1:bb_mt_val
    msstrns_mn2 = findobj(...
        'Tag',sprintf('cnd_bttmbnd_msstrns_mn2_%d',j));
    msstrns_mn3 = findobj(...
        'Tag',sprintf('cnd_bttmbnd_msstrns_mn3_%d',j));
    msstrns_edt1 = findobj(...
        'Tag',sprintf('cnd_bttmbnd_msstrns_edt1_%d',j));
    msstrns_edt2 = findobj(...
        'Tag',sprintf('cnd_bttmbnd_msstrns_edt2_%d',j));
    
    msstrns_mn2.Position = msstrns_mn2.Position - position_a;
    msstrns_mn3.Position = msstrns_mn3.Position - position_a;
    msstrns_edt1.Position = msstrns_edt1.Position - position_a;
    msstrns_edt2.Position = msstrns_edt2.Position - position_a;
    
end

cnd_bttmbnd_addmt_pshbttn.Position =...
    cnd_bttmbnd_addmt_pshbttn.Position - position_a;

cnd_bttmbnd_remmt_pshbttn.Position =...
    cnd_bttmbnd_remmt_pshbttn.Position - position_a;

cnd_bttmbnd_outtmptimep_txt.Position =...
    cnd_bttmbnd_outtmptimep_txt.Position - position_a;

cnd_bttmbnd_outtmptimep_edt1.Position =...
    cnd_bttmbnd_outtmptimep_edt1.Position - position_a;

cnd_bttmbnd_outtmptimep_edt2.Position =...
    cnd_bttmbnd_outtmptimep_edt2.Position - position_a;

cnd_bttmbnd_convcoeff1_txt.Position =...
    cnd_bttmbnd_convcoeff1_txt.Position - position_a;

cnd_bttmbnd_convcoeff1_edt.Position =...
    cnd_bttmbnd_convcoeff1_edt.Position - position_a;

cnd_bttmbnd_exrd_txt.Position =...
    cnd_bttmbnd_exrd_txt.Position - position_a;

cnd_bttmbnd_exrd_mn.Position =...
    cnd_bttmbnd_exrd_mn.Position - position_a;

cnd_bttmbnd_tmprg1_txt.Position =...
    cnd_bttmbnd_tmprg1_txt.Position - position_a;

cnd_bttmbnd_tmprg1_edt1.Position =...
    cnd_bttmbnd_tmprg1_edt1.Position - position_a;

cnd_bttmbnd_tmprg1_edt2.Position =...
    cnd_bttmbnd_tmprg1_edt2.Position - position_a;

cnd_bttmbnd_tmprg1_edt3.Position =...
    cnd_bttmbnd_tmprg1_edt3.Position - position_a;

cnd_bttmbnd_tmprg2_txt.Position =...
    cnd_bttmbnd_tmprg2_txt.Position - position_a;

cnd_bttmbnd_tmprg2_edt1.Position =...
    cnd_bttmbnd_tmprg2_edt1.Position - position_a;

cnd_bttmbnd_tmprg2_edt2.Position =...
    cnd_bttmbnd_tmprg2_edt2.Position - position_a;

cnd_bttmbnd_tmprg2_edt3.Position =...
    cnd_bttmbnd_tmprg2_edt3.Position - position_a;

cnd_bttmbnd_rpt_txt.Position =...
    cnd_bttmbnd_rpt_txt.Position - position_a;

cnd_bttmbnd_rpt_mn.Position =...
    cnd_bttmbnd_rpt_mn.Position - position_a;

cnd_bttmbnd_absrpmd_txt.Position =...
    cnd_bttmbnd_absrpmd_txt.Position - position_a;

cnd_bttmbnd_absrpmd_mn.Position =...
    cnd_bttmbnd_absrpmd_mn.Position - position_a;

cnd_bttmbnd_flm_txt.Position =...
    cnd_bttmbnd_flm_txt.Position - position_a;

cnd_bttmbnd_flm_mn.Position =...
    cnd_bttmbnd_flm_mn.Position - position_a;

cnd_bttmbnd_ignmssflx_txt.Position =...
    cnd_bttmbnd_ignmssflx_txt.Position - position_a;

for j = 1:bb_imf_val
    ignmssflx_mn = findobj(...
        'Tag',sprintf('cnd_bttmbnd_ignmssflx_mn_%d',j));
    ignmssflx_edt = findobj(...
        'Tag',sprintf('cnd_bttmbnd_ignmssflx_edt_%d',j));
    
    ignmssflx_mn.Position = ignmssflx_mn.Position - position_a;
    ignmssflx_edt.Position = ignmssflx_edt.Position - position_a;
    
end

% Extend panel
position_a = [0 shift_val 0 -shift_val];
cnd_bttmbnd_inpnl.Position = cnd_bttmbnd_inpnl.Position - position_a;
%% Scrollbar adjusting
global cnd_bttmbnd_scrll_sldr

cnd_bttmbnd_inpnl.Units = 'normalized';
cnd_bttmbnd_scrll_sldr.Max = cnd_bttmbnd_inpnl.Position(4) - 1;
cnd_bttmbnd_scrll_sldr.Value = 0;
cnd_bttmbnd_inpnl.Position(2) = 0;
cnd_bttmbnd_inpnl.Units = 'pixels';
function cnd_bttmbnd_remimf_pshbttn_callback(hObject, eventdata, handles)
global bb_imf_val bb_mt_val
%%
cnd_bttmbnd_ignmssflx_mn = findobj(...
    'Tag',(sprintf('cnd_bttmbnd_ignmssflx_mn_%d',bb_imf_val)));
cnd_bttmbnd_ignmssflx_edt = findobj(...
    'Tag',(sprintf('cnd_bttmbnd_ignmssflx_edt_%d',bb_imf_val)));

delete(cnd_bttmbnd_ignmssflx_mn);
delete(cnd_bttmbnd_ignmssflx_edt);

bb_imf_val = bb_imf_val - 1;
%%
global cnd_bttmbnd_inpnl cnd_bttmbnd_msstrns_txt cnd_bttmbnd_msstrns_mn1...
    cnd_bttmbnd_addmt_pshbttn cnd_bttmbnd_remmt_pshbttn...
    cnd_bttmbnd_outtmptimep_txt cnd_bttmbnd_outtmptimep_edt1...
    cnd_bttmbnd_outtmptimep_edt2...
    cnd_bttmbnd_convcoeff1_txt cnd_bttmbnd_convcoeff1_edt...
    cnd_bttmbnd_exrd_txt cnd_bttmbnd_exrd_mn...
    cnd_bttmbnd_tmprg1_txt cnd_bttmbnd_tmprg1_edt1...
    cnd_bttmbnd_tmprg1_edt2 cnd_bttmbnd_tmprg1_edt3...
    cnd_bttmbnd_tmprg2_txt cnd_bttmbnd_tmprg2_edt1...
    cnd_bttmbnd_tmprg2_edt2 cnd_bttmbnd_tmprg2_edt3...
    cnd_bttmbnd_rpt_txt cnd_bttmbnd_rpt_mn...
    cnd_bttmbnd_absrpmd_txt cnd_bttmbnd_absrpmd_mn...
    cnd_bttmbnd_flm_txt cnd_bttmbnd_flm_mn...
    cnd_bttmbnd_ignmssflx_txt...
    
shift_val = -24;
position_a = [0 -shift_val 0 0];

cnd_bttmbnd_msstrns_txt.Position =...
    cnd_bttmbnd_msstrns_txt.Position - position_a;

cnd_bttmbnd_msstrns_mn1.Position = ...
    cnd_bttmbnd_msstrns_mn1.Position - position_a;

for j = 1:bb_mt_val
    msstrns_mn2 = findobj(...
        'Tag',sprintf('cnd_bttmbnd_msstrns_mn2_%d',j));
    msstrns_mn3 = findobj(...
        'Tag',sprintf('cnd_bttmbnd_msstrns_mn3_%d',j));
    msstrns_edt1 = findobj(...
        'Tag',sprintf('cnd_bttmbnd_msstrns_edt1_%d',j));
    msstrns_edt2 = findobj(...
        'Tag',sprintf('cnd_bttmbnd_msstrns_edt2_%d',j));
    
    msstrns_mn2.Position = msstrns_mn2.Position - position_a;
    msstrns_mn3.Position = msstrns_mn3.Position - position_a;
    msstrns_edt1.Position = msstrns_edt1.Position - position_a;
    msstrns_edt2.Position = msstrns_edt2.Position - position_a;
    
end

cnd_bttmbnd_addmt_pshbttn.Position =...
    cnd_bttmbnd_addmt_pshbttn.Position - position_a;

cnd_bttmbnd_remmt_pshbttn.Position =...
    cnd_bttmbnd_remmt_pshbttn.Position - position_a;

cnd_bttmbnd_outtmptimep_txt.Position =...
    cnd_bttmbnd_outtmptimep_txt.Position - position_a;

cnd_bttmbnd_outtmptimep_edt1.Position =...
    cnd_bttmbnd_outtmptimep_edt1.Position - position_a;

cnd_bttmbnd_outtmptimep_edt2.Position =...
    cnd_bttmbnd_outtmptimep_edt2.Position - position_a;

cnd_bttmbnd_convcoeff1_txt.Position =...
    cnd_bttmbnd_convcoeff1_txt.Position - position_a;

cnd_bttmbnd_convcoeff1_edt.Position =...
    cnd_bttmbnd_convcoeff1_edt.Position - position_a;

cnd_bttmbnd_exrd_txt.Position =...
    cnd_bttmbnd_exrd_txt.Position - position_a;

cnd_bttmbnd_exrd_mn.Position =...
    cnd_bttmbnd_exrd_mn.Position - position_a;

cnd_bttmbnd_tmprg1_txt.Position =...
    cnd_bttmbnd_tmprg1_txt.Position - position_a;

cnd_bttmbnd_tmprg1_edt1.Position =...
    cnd_bttmbnd_tmprg1_edt1.Position - position_a;

cnd_bttmbnd_tmprg1_edt2.Position =...
    cnd_bttmbnd_tmprg1_edt2.Position - position_a;

cnd_bttmbnd_tmprg1_edt3.Position =...
    cnd_bttmbnd_tmprg1_edt3.Position - position_a;

cnd_bttmbnd_tmprg2_txt.Position =...
    cnd_bttmbnd_tmprg2_txt.Position - position_a;

cnd_bttmbnd_tmprg2_edt1.Position =...
    cnd_bttmbnd_tmprg2_edt1.Position - position_a;

cnd_bttmbnd_tmprg2_edt2.Position =...
    cnd_bttmbnd_tmprg2_edt2.Position - position_a;

cnd_bttmbnd_tmprg2_edt3.Position =...
    cnd_bttmbnd_tmprg2_edt3.Position - position_a;

cnd_bttmbnd_rpt_txt.Position =...
    cnd_bttmbnd_rpt_txt.Position - position_a;

cnd_bttmbnd_rpt_mn.Position =...
    cnd_bttmbnd_rpt_mn.Position - position_a;

cnd_bttmbnd_absrpmd_txt.Position =...
    cnd_bttmbnd_absrpmd_txt.Position - position_a;

cnd_bttmbnd_absrpmd_mn.Position =...
    cnd_bttmbnd_absrpmd_mn.Position - position_a;

cnd_bttmbnd_flm_txt.Position =...
    cnd_bttmbnd_flm_txt.Position - position_a;

cnd_bttmbnd_flm_mn.Position =...
    cnd_bttmbnd_flm_mn.Position - position_a;

cnd_bttmbnd_ignmssflx_txt.Position =...
    cnd_bttmbnd_ignmssflx_txt.Position - position_a;

for j = 1:bb_imf_val
    ignmssflx_mn = findobj(...
        'Tag',sprintf('cnd_bttmbnd_ignmssflx_mn_%d',j));
    ignmssflx_edt = findobj(...
        'Tag',sprintf('cnd_bttmbnd_ignmssflx_edt_%d',j));
    
    ignmssflx_mn.Position = ignmssflx_mn.Position - position_a;
    ignmssflx_edt.Position = ignmssflx_edt.Position - position_a;
    
end

% Extend panel
position_a = [0 shift_val 0 -shift_val];
cnd_bttmbnd_inpnl.Position = cnd_bttmbnd_inpnl.Position - position_a;
%% Scrollbar adjusting
global cnd_bttmbnd_scrll_sldr

cnd_bttmbnd_inpnl.Units = 'normalized';
cnd_bttmbnd_scrll_sldr.Max = cnd_bttmbnd_inpnl.Position(4) - 1;
cnd_bttmbnd_scrll_sldr.Value = 0;
cnd_bttmbnd_inpnl.Position(2) = 0;
cnd_bttmbnd_inpnl.Units = 'pixels';
function cnd_bttmbnd_scrll_sldr_callback(hObject, eventdata, handles)
global cnd_bttmbnd_scrll_sldr cnd_bttmbnd_inpnl

cnd_bttmbnd_inpnl.Units = 'normalized';
cnd_bttmbnd_inpnl.Position(2) = -(cnd_bttmbnd_scrll_sldr.Value);
display(cnd_bttmbnd_inpnl.Position);
cnd_bttmbnd_inpnl.Units = 'pixels';


%% --------------- OBJECT STRUCTURE ---------------------------------------
function cnd_objstrct_pshbttn_callback(~, ~, ~)
global objstrct_figure objstrct_layer_pnl...
    objstrct_title_pnl objstrct_title_txt...
    objstrct_addlayer_pshbttn objstrct_remlayer_pshbttn...
    objstrct_crte_pshbttn objstrct_scrll_sldr...
    objstrct_addlayer_txt...
    active_layer_id layer_count

%Creates figure of Object Structure
objstrct_figure = figure(...
    'Color',[.94 .94 .94],...
    'Position',[680,280,270,170],...
    'Resize','Off',...
    'MenuBar','none',...
    'Name','Object Structure',...
    'Tag','objstrct_figure',...
    'Visible','on');

%Creates panel which contains all the layers
objstrct_layer_pnl = uipanel(...
    'Parent',objstrct_figure,...
    'Tag','objstrct_layer_pnl',...
    'Units','pixels',...
    'Position',[0 0 255 150],...
    'BorderType','none');

%Creates panel to contain title
objstrct_title_pnl = uipanel(...
    'Parent',objstrct_figure,...
    'Tag','objstrct_title_pnl',...
    'Units','pixels',...
    'Position',[0 150 270 25],...
    'BorderType','none');

%Creates Title Text
objstrct_title_txt = uicontrol(...
    'Parent',objstrct_title_pnl,...
    'Style','text',...
    'HorizontalAlignment','center',...
    'String','Object Structure',...
    'FontSize',15,...
    'FontWeight','bold',...
    'Units','pixels',...
    'Tag','objstrct_title_txt',...
    'Position',[60 0 185 25]);

%Create instruction text for add layer button
objstrct_addlayer_txt = uicontrol(...
    'Parent',objstrct_layer_pnl,...
    'Style','text',...
    'String','Add new layer',...
    'FontSize',10,...
    'Units','pixels',...
    'Tag','objstrct_addlayer_txt',...
    'Position',[50 85 100 15]);

%Create addlayer button
objstrct_addlayer_pshbttn = uicontrol(...
    'Parent',objstrct_layer_pnl,...
    'Style','pushbutton',...
    'String','+',...
    'Units','pixels',...
    'Position',[150 75 35 35],...  %[215 90 35 35] side position
    'Tag','objstrct_addlayer_pshbttn',...
    'Callback',@objstrct_addlayer_pshbttn_callback,...
    'FontSize',20.0,...
    'FontWeight','bold');

%Create remove layer button
objstrct_remlayer_pshbttn = uicontrol(...
    'Parent',objstrct_layer_pnl,...
    'Style','pushbutton',...
    'String','-',...
    'Units','pixels',...
    'Position',[215 50 35 35],...
    'Tag','objstrct_remlayer_pshbttn',...
    'Callback',@objstrct_remlayer_pshbttn_callback,...
    'FontSize',20,...
    'FontWeight','bold',...
    'Visible','Off');

%Create the complete object structure button
objstrct_crte_pshbttn = uicontrol(...
    'Parent',objstrct_layer_pnl,...
    'Style','pushbutton',...
    'String','Create Object',...
    'Units','pixels',...
    'Position',[55 5 150 30],...
    'Tag','objstrct_crte_pshbttn',...
    'Callback',@objstrct_crte_pshbttn_callback,...
    'FontSize',10,...
    'Visible','Off');

%Create scrollbar
objstrct_scrll_sldr = uicontrol(...
    'Parent',objstrct_figure,...
    'Style','slider',...
    'Units','pixels',...
    'Position',[255 0 15 170],...
    'Callback',@objstrct_scrll_sldr_callback,...
    'Tag','objstrct_scrll_sldr',...
    'Visible','On');


%Listener also instant scroll
addlistener(objstrct_scrll_sldr,'Value','PreSet',... % allows scroll to update immediately
    @(hObject, eventdata)objstrct_scrll_sldr_callback);


active_layer_id = 0; %Intialize layer id which determine current layer user is in
layer_count = 0; %Intialize layer count which determines number of layers

function objstrct_addlayer_pshbttn_callback(~, ~, ~)
%% Referencing
global objstrct_figure objstrct_layer_pnl...
    objstrct_title_pnl...
    objstrct_addlayer_pshbttn objstrct_remlayer_pshbttn...
    objstrct_crte_pshbttn objstrct_scrll_sldr...
    objstrct_addlayer_txt...
    layer_count cmpname_list
%% Hides instructive layer
if lt(layer_count,1) %when the layer count is less than 1 execute
    objstrct_addlayer_pshbttn.Position = [215 90 35 35]; %move add layer button to the side
    objstrct_addlayer_txt.Visible = 'Off'; %make the add layer help text invisible
    objstrct_remlayer_pshbttn.Visible = 'On'; %Make remove layer button visible
    objstrct_crte_pshbttn.Visible = 'On'; %Also make create object structurebutton visible
end

layer_count = layer_count + 1; %Add one to the layer counter

disp(sprintf('Layer %d',layer_count));
%% Positioning
if gt(layer_count,1) %When there is more than 1 layer
    x = 125;
    if le(layer_count,4) %when there is less than 4 layers
        %Increase the height of the object structure windows by x
        objstrct_figure.Position = objstrct_figure.Position + [0 -x 0 x];
        %Increase length of slider by x
        objstrct_scrll_sldr.Position = objstrct_scrll_sldr.Position + [0 0 0 x];
        %Move title panel up by x
        objstrct_title_pnl.Position = objstrct_title_pnl.Position + [0 x 0 0];
    end
    %Increase height of panel containing layers
    objstrct_layer_pnl.Position = objstrct_layer_pnl.Position + [0 0 0 x];
    
    for j = 1:(layer_count-1) %loop through one less amount of layers
        %Move all layer panels except for the last one by x
        objctstrct_lyr_tem = findobj(... % find each layer
            'Tag',sprintf('objstrct_layer_%d_pnl',j)); % based on value of j
        objctstrct_lyr_tem.Position = ... % move the layer up by x
            objctstrct_lyr_tem.Position + [0 x 0 0];
    end
end
%% create new layer
objstrct_layer_n_pnl = uipanel(...
    'Parent',objstrct_layer_pnl,...
    'Units','pixels',...
    'FontSize',12.0,...
    'FontWeight','bold',...
    'Position',[5 35 210 120],...
    'Title',sprintf('Layer #%d',layer_count),...
    'Tag',sprintf('objstrct_layer_%d_pnl',layer_count),...
    'TitlePosition','centertop');

%Creates a new mass fraction count for specific layer
mass_frac_count = uicontrol(...
    'Parent',objstrct_layer_n_pnl,...
    'Style','text',...
    'String','1',...
    'Visible','Off',...
    'Tag',sprintf('mass_frac_count_%d',layer_count));

disp(sprintf('Layer %d Mass Fraction Count is %s',...
    layer_count,mass_frac_count.String));

objstrct_thcknss_txt = uicontrol(...
    'Parent',objstrct_layer_n_pnl,...
    'Style','text',...
    'String','Thickness:',...
    'Units','pixels',...
    'Position',[10 77 60 15],...
    'Tag',sprintf('objstrct_thcknss_txt_%d',layer_count),...
    'TooltipString','Default');

objstrct_thcknss_edt = uicontrol(...
    'Parent',objstrct_layer_n_pnl,...
    'Style','edit',...
    'Units','pixels',...
    'Position',[80 75 60 20],...
    'Tag',sprintf('objstrct_thcknss_edt_%d',layer_count),...
    'TooltipString','Default');

objstrct_temp_txt = uicontrol(...
    'Parent',objstrct_layer_n_pnl,...
    'Style','text',...
    'String','Temperature:',...
    'Units','pixels',...
    'Position',[10 55 70 15],...
    'Tag',sprintf('objstrct_temp_txt_%d',layer_count),...
    'TooltipString','Default');

objstrct_temp_edt = uicontrol(...
    'Parent',objstrct_layer_n_pnl,...
    'Style','edit',...
    'Units','pixels',...
    'Position',[80 52 60 20],...
    'Tag',sprintf('objstrct_temp_edt_%d',layer_count),...
    'TooltipString','Default');

objstrct_massfrac_txt = uicontrol(...
    'Parent',objstrct_layer_n_pnl,...
    'Style','text',...
    'String','Mass Fraction:',...
    'Units','pixels',...
    'Position',[10 30 80 15],...
    'Tag',sprintf('objstrct_massfrac_txt_%d',layer_count),...
    'TooltipString','Default');

objstrct_massfrac_mn = uicontrol(...
    'Parent',objstrct_layer_n_pnl,...
    'Style','popupmenu',...
    'String',cmpname_list,...
    'Units','pixels',...
    'Position',[10 10 95 20],...
    'Tag',sprintf('objstrct_massfrac_mn_%d_%s',...
    layer_count,mass_frac_count.String),...
    'TooltipString','Default');

objstrct_massfrac_edt = uicontrol(...
    'Parent',objstrct_layer_n_pnl,...
    'Style','edit',...
    'Units','pixels',...
    'Position',[110 8 50 21.5],...
    'Tag',sprintf('objstrct_massfrac_edt_%d_%s',...
    layer_count,mass_frac_count.String),...
    'TooltipString','Default');

objstrct_addmf_pshbttn = uicontrol(...
    'Parent',objstrct_layer_n_pnl,...
    'Style','pushbutton',...
    'Units','pixels',...
    'String','+',...
    'Position',[162 7 20 24],...
    'Tag',sprintf('objstrct_mf%d_add_pshbttn',layer_count),...
    'Callback',@objstrct_addmf_pshbttn_callback,...
    'TooltipString','Default');

objstrct_remmf_pshbttn = uicontrol(...
    'Parent',objstrct_layer_n_pnl,...
    'Style','pushbutton',...
    'Units','pixels',...
    'String','-',...
    'Position',[182 7 20 24],...
    'Callback',@objstrct_remmf_pshbttn_callback,...
    'Tag',sprintf('objstrct_mf%d_rem_pshbttn',layer_count),...
    'TooltipString','Default',...
    'Visible','Off');
%% scroll adjustments
objstrct_layer_pnl.Units = 'normalized';
objstrct_scrll_sldr.Max = objstrct_layer_pnl.Position(4) -.96;
objstrct_layer_pnl.Units = 'pixels';
%% Testing
global addmfplus remmfplus

addmfplus = gobjects(layer_count,1);
for ii = 1:layer_count
    f = findobj('Tag',sprintf('objstrct_mf%d_add_pshbttn',ii));
    disp(f);
    addmfplus(ii) = findobj('Tag',sprintf('objstrct_mf%d_add_pshbttn',ii));
end

remmfplus = gobjects(layer_count,1);
for ii = 1:layer_count
    remmfplus(ii) = findobj('Tag',sprintf('objstrct_mf%d_rem_pshbttn',ii));
end

function objstrct_remlayer_pshbttn_callback(~, ~, ~)
%% For Referencing
global objstrct_figure objstrct_layer_pnl...
    objstrct_title_pnl...
    objstrct_addlayer_pshbttn objstrct_remlayer_pshbttn...
    objstrct_scrll_sldr...
    objstrct_addlayer_txt...
    layer_count

%retrieve the number of mass fraction input from latest layer
mass_frac_count = findobj('Tag',sprintf('mass_frac_count_%d',layer_count));

objstrct_massfrac_mn = findobj(...
    'Tag',sprintf('objstrct_massfrac_mn_%d_%s',...
    layer_count,mass_frac_count.String));
objstrct_massfrac_edt = findobj(...
    'Tag',sprintf('objstrct_massfrac_edt_%d_%s',...
    layer_count,mass_frac_count.String));
objstrct_massfrac_txt = findobj(...
    'Tag',sprintf('objstrct_massfrac_txt_%d',layer_count));
objstrct_temp_edt = findobj(...
    'Tag',sprintf('objstrct_temp_edt_%d',layer_count));
objstrct_temp_txt = findobj(...
    'Tag',sprintf('objstrct_temp_txt_%d',layer_count));
objstrct_thcknss_edt = findobj(...
    'Tag',sprintf('objstrct_thcknss_edt_%d',layer_count));
objstrct_thcknss_txt = findobj(...
    'Tag',sprintf('objstrct_thcknss_txt_%d',layer_count));
objstrct_layer = findobj(...
    'Tag',sprintf('objstrct_layer_%d_pnl',layer_count));

objstrct_mf_rem = findobj('Tag',sprintf('objstrct_mf%d_rem_pshbttn',layer_count));
objstrct_mf_add = findobj('Tag',sprintf('objstrct_mf%d_add_pshbttn',layer_count));
%% delete recent layer
if gt(layer_count,0) %if the number of layer is greater than zero then
    %delete the entire layer and its options
    delete(mass_frac_count);
    delete(objstrct_mf_rem);
    delete(objstrct_mf_add);
    delete(objstrct_massfrac_mn);
    delete(objstrct_massfrac_edt);
    delete(objstrct_massfrac_txt);
    delete(objstrct_temp_edt);
    delete(objstrct_temp_txt);
    delete(objstrct_thcknss_edt);
    delete(objstrct_thcknss_txt);
    delete(objstrct_layer);
    
    layer_count = layer_count-1; %lower the counter to one less layers
    fprintf('There are now %d Layers',layer_count);
end
%if at last layer, return back to initial position
if eq(layer_count,0) %if there are no layers left
    objstrct_addlayer_pshbttn.Position= [150 75 35 35]; %move add layer postion back center
    objstrct_addlayer_txt.Visible = 'On'; %turn on intruction text
    objstrct_remlayer_pshbttn.Visible = 'Off'; %make remove layer invisible
end
%% Positioning
if gt((layer_count),0) %when layer counter minus 1 is greater than zero
    y = 125;
    if le((layer_count),3) %when layer counter minus 1 is less than 3
        %Decrease the height of window by y
        objstrct_figure.Position = objstrct_figure.Position - [0 -y 0 y];
        %Decrese height of scrollbar by y
        objstrct_scrll_sldr.Position = objstrct_scrll_sldr.Position - [0 0 0 y];
        %move title panel down by y
        objstrct_title_pnl.Position = objstrct_title_pnl.Position - [0 y 0 0];
    end
    %Decrease height of panel containing layer
    objstrct_layer_pnl.Position = objstrct_layer_pnl.Position - [0 0 0 y];
    
    for j = 1:(layer_count) %loop upto the second to last layer or one less amount of layers
        objctstrct_lyr_tem = findobj(... % find each layer based on value of j
            'Tag',sprintf('objstrct_layer_%d_pnl',j));
        objctstrct_lyr_tem.Position = ... % moove the layer down
            objctstrct_lyr_tem.Position - [0 y 0 0];
    end
end
%% scroll adjustments
objstrct_layer_pnl.Units = 'normalized';
objstrct_scrll_sldr.Max = objstrct_layer_pnl.Position(4) -.96;
objstrct_layer_pnl.Units = 'pixels';

function objstrct_addmf_pshbttn_callback(src, ~)
%% Identifying button before excuting
global addmfplus
idx = find(addmfplus==src);
disp(['Layer ' num2str(idx)])
%% Naming each object to later call them
global objstrct_layer_pnl...
    objstrct_scrll_sldr...
    layer_count cmpname_list

mass_frac_count = findobj('Tag',sprintf('mass_frac_count_%d',idx));
objstrct_massfrac_txt = findobj('Tag',sprintf('objstrct_massfrac_txt_%d',idx));
objstrct_temp_edt = findobj('Tag',sprintf('objstrct_temp_edt_%d',idx));
objstrct_temp_txt = findobj('Tag',sprintf('objstrct_temp_txt_%d',idx));
objstrct_thcknss_edt = findobj('Tag',sprintf('objstrct_thcknss_edt_%d',idx));
objstrct_thcknss_txt = findobj('Tag',sprintf('objstrct_thcknss_txt_%d',idx));
objstrct_layer = findobj('Tag',sprintf('objstrct_layer_%d_pnl',idx));
objstrct_mf_rem = findobj('Tag',sprintf('objstrct_mf%d_rem_pshbttn',idx));
objstrct_mf_add = findobj('Tag',sprintf('objstrct_mf%d_add_pshbttn',idx));

mass_frac_count.String = str2double(mass_frac_count.String) + 1; % adds one to counter

if gt(str2double(mass_frac_count.String),1) %shows remove button when more than one entry
    objstrct_mf_rem.Visible = 'On';
end
%% Creates new mass fraction entry
uicontrol('Parent',objstrct_layer,'Style','popupmenu','String',cmpname_list,...
    'Units','pixels','Position',[10 10 95 20],...
    'Tag',sprintf('objstrct_massfrac_mn_%d_%s',idx,mass_frac_count.String));

uicontrol('Parent',objstrct_layer,'Style','edit','Units','pixels',...
    'Position',[110 8 50 21.5],...
    'Tag',sprintf('objstrct_massfrac_edt_%d_%s',idx,mass_frac_count.String));

disp(sprintf('Layer %d has %s Mass Fractions',idx,mass_frac_count.String));
%% Positioning
a = 26.5;
% F.Position = F.Position + [0 0 0 a];
% objstrct_scrll_sldr.Position = objstrct_scrll_sldr.Position + [0 0 0 a];
% OST.Position = OST.Position + [0 a 0 0];
objstrct_layer_pnl.Position = objstrct_layer_pnl.Position + [0 0 0 a];


% addlayer.Position = addlayer.Position + [0 a 0 0];
% remlayer.Position = remlayer.Position + [0 a 0 0];
objstrct_massfrac_txt.Position = objstrct_massfrac_txt.Position + [0 a 0 0];
objstrct_temp_txt.Position = objstrct_temp_txt.Position + [0 a 0 0];
objstrct_thcknss_edt.Position = objstrct_thcknss_edt.Position + [0 a 0 0];
objstrct_thcknss_txt.Position = objstrct_thcknss_txt.Position + [0 a 0 0];
objstrct_temp_edt.Position = objstrct_temp_edt.Position + [0 a 0 0];

for j = 1:(str2double(mass_frac_count.String)-1)
    objstrct_massfrac_edt = findobj('Tag',sprintf('objstrct_massfrac_edt_%d_%d',idx,j));
    objstrct_massfrac_mn = findobj('Tag',sprintf('objstrct_massfrac_mn_%d_%d',idx,j));
    objstrct_massfrac_mn.Position = objstrct_massfrac_mn.Position + [0 a 0 0];
    objstrct_massfrac_edt.Position = objstrct_massfrac_edt.Position + [0 a 0 0];
end

if idx == layer_count
    idx = idx-1;
    objstrct_layer.Position = objstrct_layer.Position + [0 0 0 a];
    for j = 1:idx
        objstrct_layer = findobj('Tag',sprintf('objstrct_layer_%d_pnl',j));
        objstrct_layer.Position = objstrct_layer.Position + [0 a 0 0];
    end
elseif lt(idx,layer_count)
    objstrct_layer.Position = objstrct_layer.Position + [0 -a 0 a];
    for j = 1:idx
        objstrct_layer = findobj('Tag',sprintf('objstrct_layer_%d_pnl',j));
        objstrct_layer.Position = objstrct_layer.Position + [0 a 0 0];
    end
end
%% scrolling adjustments
objstrct_layer_pnl.Units = 'normalized';
objstrct_scrll_sldr.Max = objstrct_layer_pnl.Position(4) -.96;
objstrct_layer_pnl.Units = 'pixels';

function objstrct_remmf_pshbttn_callback(src, ~)
%% Identifying button before excuting
global remmfplus
idx = find(remmfplus==src);
disp(['Layer ' num2str(idx)])
%% Naming each object to later call them
global objstrct_layer_pnl...
    objstrct_scrll_sldr...
    layer_count

cmpdata = findobj('Tag','cmphold');

mass_frac_count = findobj('Tag',sprintf('mass_frac_count_%d',idx));
objstrct_massfrac_txt = findobj('Tag',sprintf('objstrct_massfrac_txt_%d',idx));
objstrct_temp_edt = findobj('Tag',sprintf('objstrct_temp_edt_%d',idx));
objstrct_temp_txt = findobj('Tag',sprintf('objstrct_temp_txt_%d',idx));
objstrct_thcknss_edt = findobj('Tag',sprintf('objstrct_thcknss_edt_%d',idx));
objstrct_thcknss_txt = findobj('Tag',sprintf('objstrct_thcknss_txt_%d',idx));
objstrct_layer = findobj('Tag',sprintf('objstrct_layer_%d_pnl',idx));
objstrct_mf_rem = findobj('Tag',sprintf('objstrct_mf%d_rem_pshbttn',idx));

objstrct_massfrac_mn = findobj('Tag',sprintf('objstrct_massfrac_mn_%d_%s',idx,mass_frac_count.String));
objstrct_massfrac_edt = findobj('Tag',sprintf('objstrct_massfrac_edt_%d_%s',idx,mass_frac_count.String));

mass_frac_count.String = str2double(mass_frac_count.String) - 1; % removes one to counter

if eq(str2double(mass_frac_count.String),1)
    objstrct_mf_rem.Visible = 'Off';
end
%% deleting mass fraction entry
delete(objstrct_massfrac_mn);
delete(objstrct_massfrac_edt);
disp(sprintf('Layer %d has %s Mass Fractions',idx,mass_frac_count.String));
%% Positioning
a = 26.5;
% F.Position = F.Position - [0 0 0 a];
% objstrct_scrll_sldr.Position = objstrct_scrll_sldr.Position - [0 0 0 a];
% OST.Position = OST.Position - [0 a 0 0];
objstrct_layer_pnl.Position = objstrct_layer_pnl.Position - [0 0 0 a];

% addlayer.Position = addlayer.Position - [0 a 0 0];
% remlayer.Position = remlayer.Position - [0 a 0 0];
objstrct_massfrac_txt.Position = objstrct_massfrac_txt.Position - [0 a 0 0];
objstrct_temp_txt.Position = objstrct_temp_txt.Position - [0 a 0 0];
objstrct_thcknss_edt.Position = objstrct_thcknss_edt.Position - [0 a 0 0];
objstrct_thcknss_txt.Position = objstrct_thcknss_txt.Position - [0 a 0 0];
objstrct_temp_edt.Position = objstrct_temp_edt.Position - [0 a 0 0];

for j = 1:(str2double(mass_frac_count.String))
    objstrct_massfrac_edt = findobj('Tag',sprintf('objstrct_massfrac_edt_%d_%d',idx,j));
    objstrct_massfrac_mn = findobj('Tag',sprintf('objstrct_massfrac_mn_%d_%d',idx,j));
    objstrct_massfrac_mn.Position = objstrct_massfrac_mn.Position - [0 a 0 0];
    objstrct_massfrac_edt.Position = objstrct_massfrac_edt.Position - [0 a 0 0];
end

if idx == layer_count
    idx = idx-1;
    objstrct_layer.Position = objstrct_layer.Position - [0 0 0 a];
    for j = 1:idx
        objstrct_layer = findobj('Tag',sprintf('objstrct_layer_%d_pnl',j));
        objstrct_layer.Position = objstrct_layer.Position - [0 a 0 0];
    end
elseif lt(idx,layer_count)
    objstrct_layer.Position = objstrct_layer.Position - [0 -a 0 a];
    for j = 1:idx
        objstrct_layer = findobj('Tag',sprintf('objstrct_layer_%d_pnl',j));
        objstrct_layer.Position = objstrct_layer.Position - [0 a 0 0];
    end
end
%% scrolling adjustments
objstrct_layer_pnl.Units = 'normalized';
objstrct_scrll_sldr.Max = objstrct_layer_pnl.Position(4) -.96;
objstrct_layer_pnl.Units = 'pixels';

function objstrct_scrll_sldr_callback(~, ~, ~)
global objstrct_scrll_sldr objstrct_layer_pnl

objstrct_layer_pnl.Units = 'normalized';
objstrct_scrll_sldr.Max = objstrct_layer_pnl.Position(4) -.96;
objstrct_layer_pnl.Position(1,2) = -(objstrct_scrll_sldr.Value);
objstrct_layer_pnl.Units = 'pixels';

function objstrct_crte_pshbttn_callback(hObject, eventdata, handles)
global objstrct_figure objstrctVal
objstrct_figure.Visible = 'Off';
objstrctVal = 0;


function cnd_crte_pshbttn_callback(hObject, eventdata, handles)
%% Top Boundary
OBJ_BOUND{1,1} = 'OBJECT BOUNDARIES';
OBJ_BOUND{2,1} = '*****************';
OBJ_BOUND{3,1} = ' ';

global cnd_tpbnd_msstrns_mn1...
    cnd_tpbnd_outtmptimep_edt1...
    cnd_tpbnd_outtmptimep_edt2...
    cnd_tpbnd_convcoeff1_edt...
    cnd_tpbnd_exrd_mn...
    cnd_tpbnd_tmprg1_edt1...
    cnd_tpbnd_tmprg1_edt2 cnd_tpbnd_tmprg1_edt3...
    cnd_tpbnd_tmprg2_edt1...
    cnd_tpbnd_tmprg2_edt2 cnd_tpbnd_tmprg2_edt3...
    cnd_tpbnd_rpt_mn...
    cnd_tpbnd_absrpmd_mn...
    cnd_tpbnd_flm_mn...
    cnd_tpbnd_outtmp_edt...
    cnd_tpbnd_convcoeff2_edt...
    cnd_tpbnd_rd_edt...
    tp_mt_val tp_imf_val
    
OBJ_BOUND{4,1} = 'TOP BOUNDARY';
OBJ_BOUND{5,1} = ' ';

OBJ_BOUND{6,1} = sprintf('MASS TRANSPORT:  %s',...
    cnd_tpbnd_msstrns_mn1.String{cnd_tpbnd_msstrns_mn1.Value});

if cnd_tpbnd_msstrns_mn1.Value == 1;
    for j = 1:tp_mt_val
        tmm2 = findobj('Tag',(sprintf('cnd_tpbnd_msstrns_mn2_%d',j)));
        tmm2_selected = tmm2.String{tmm2.Value};
        
        tmm3 = findobj('Tag',(sprintf('cnd_tpbnd_msstrns_mn3_%d',j)));
        tmm3_selected = tmm3.String{tmm3.Value};
        
        tmm4 = findobj('Tag',(sprintf('cnd_tpbnd_msstrns_edt1_%d',j)));
        tmm4_selected = tmm4.String;
        
        tmm5 = findobj('Tag',(sprintf('cnd_tpbnd_msstrns_edt2_%d',j)));
        tmm5_selected = tmm5.String;
        
        OBJ_BOUND{j+6,1} = sprintf('%s  %s  %s  %s',...
            tmm2_selected,tmm3_selected,tmm4_selected,tmm5_selected);
    end
elseif cnd_tpbnd_msstrns_mn1.Value == 2;
    OBJ_BOUND{7:tp_mt_val+7,1} = '';
    
    OBJ_BOUND{7:tp_mt_val+7,1}...
        (all(OBJ_BOUND{7:tp_mt_val+7,1} == ' ', 2),:) = [];
end

OBJ_BOUND{tp_mt_val+8,1} = ' ';

OBJ_BOUND{tp_mt_val+9,1} =...
    sprintf('OUTSIDE TEMP TIME PROG:  %s  %s',...
    cnd_tpbnd_outtmptimep_edt1.String,...
    cnd_tpbnd_outtmptimep_edt2.String);

OBJ_BOUND{tp_mt_val+10,1} =...
    sprintf('CONVECTION COEFF:  %s',...
    cnd_tpbnd_convcoeff1_edt.String);

OBJ_BOUND{tp_mt_val+11,1} = ' ';

OBJ_BOUND{tp_mt_val+12,1} =...
    sprintf('EXTERNAL RADIATION:  %s',...
    cnd_tpbnd_exrd_mn.String{cnd_tpbnd_exrd_mn.Value});

if cnd_tpbnd_exrd_mn.Value == 1;
    OBJ_BOUND{tp_mt_val+13,1} =...
        sprintf('TIME PROG1:  %s  %s  %s',...
        cnd_tpbnd_tmprg1_edt1.String,...
        cnd_tpbnd_tmprg1_edt2.String,...
        cnd_tpbnd_tmprg1_edt3.String);
    
    OBJ_BOUND{tp_mt_val+14,1} =...
        sprintf('TIME PROG2:  %s  %s  %s',...
        cnd_tpbnd_tmprg2_edt1.String,...
        cnd_tpbnd_tmprg2_edt2.String,...
        cnd_tpbnd_tmprg2_edt3.String);
    
    OBJ_BOUND{tp_mt_val+15,1} =...
        sprintf('REPEAT:  %s',...
        cnd_tpbnd_rpt_mn.String{cnd_tpbnd_rpt_mn.Value});
    
    OBJ_BOUND{tp_mt_val+16,1} =...
        sprintf('ABSORPTION MODE:  %s',...
        cnd_tpbnd_absrpmd_mn.String{cnd_tpbnd_absrpmd_mn.Value});
    
elseif cnd_tpbnd_exrd_mn.Value == 2;
    OBJ_BOUND{tp_mt_val+13:tp_mt_val+16,1} = '';
    
    OBJ_BOUND{tp_mt_val+13:tp_mt_val+16,1}...
        (all(OBJ_BOUND{tp_mt_val+13:tp_mt_val+16,1}...
        == ' ', 2),:) = [];
end

OBJ_BOUND{tp_mt_val+17,1} = ' ';

OBJ_BOUND{tp_mt_val+18,1} = sprintf('FLAME:  %s',...
    cnd_tpbnd_flm_mn.String{cnd_tpbnd_flm_mn.Value});

if cnd_tpbnd_flm_mn.Value == 1;
    OBJ_BOUND{tp_mt_val+19,1} = 'IGNITION MASS FLUXES:';
    
    for j = 1:tp_imf_val
        timf1 = findobj('Tag',(sprintf('cnd_tpbnd_ignmssflx_mn_%d',j)));
        timf1_selected = timf1.String{timf1.Value};
        
        timf2 = findobj('Tag',(sprintf('cnd_tpbnd_ignmssflx_edt_%d',j)));
        timf2_selected = timf2.String;
        
        OBJ_BOUND{j+tp_mt_val+19,1} = sprintf('%s  %s',...
            timf1_selected,timf2_selected);
    end
    
    OBJ_BOUND{tp_mt_val+tp_imf_val+20,1} =...
        sprintf('OUTSIDE TEMP:  %s',...
        cnd_tpbnd_outtmp_edt.String);
    OBJ_BOUND{tp_mt_val+tp_imf_val+21,1} =...
        sprintf('CONVECTION COEFF:  %s',...
        cnd_tpbnd_convcoeff2_edt.String);
    OBJ_BOUND{tp_mt_val+tp_imf_val+22,1} =...
        sprintf('RADIATION:  %s',...
        cnd_tpbnd_rd_edt.String);
    
elseif cnd_tpbnd_flm_mn.Value == 2;
    OBJ_BOUND{tp_mt_val+19:tp_mt_val+tp_imf_val+22,1} = '';
    
    OBJ_BOUND{tp_mt_val+19:tp_mt_val+tp_imf_val+22,1}...
        (all(OBJ_BOUND{tp_mt_val+19:tp_mt_val+tp_imf_val+22,1}...
        == ' ', 2),:) = [];
end
OBJ_BOUND{tp_mt_val+tp_imf_val+23,1} = ' ';
%% Bottom Boundary
global cnd_bttmbnd_msstrns_mn1...
    cnd_bttmbnd_outtmptimep_edt1...
    cnd_bttmbnd_outtmptimep_edt2...
    cnd_bttmbnd_convcoeff1_edt...
    cnd_bttmbnd_exrd_mn...
    cnd_bttmbnd_tmprg1_edt1...
    cnd_bttmbnd_tmprg1_edt2 cnd_bttmbnd_tmprg1_edt3...
    cnd_bttmbnd_tmprg2_edt1...
    cnd_bttmbnd_tmprg2_edt2 cnd_bttmbnd_tmprg2_edt3...
    cnd_bttmbnd_rpt_mn...
    cnd_bttmbnd_absrpmd_mn...
    cnd_bttmbnd_flm_mn...
    cnd_bttmbnd_outtmp_edt...
    cnd_bttmbnd_convcoeff2_edt...
    cnd_bttmbnd_rd_edt...
    bb_mt_val bb_imf_val
    
OBJ_BOUND{tp_mt_val+tp_imf_val+24,1} = 'BOTTOM BOUNDARY';
OBJ_BOUND{tp_mt_val+tp_imf_val+25,1} = ' ';

OBJ_BOUND{tp_mt_val+tp_imf_val+26,1} = sprintf('MASS TRANSPORT:  %s',...
    cnd_bttmbnd_msstrns_mn1.String{cnd_bttmbnd_msstrns_mn1.Value});

if cnd_bttmbnd_msstrns_mn1.Value == 1;
    for j = 1:bb_mt_val
        tmm2 = findobj('Tag',(sprintf('cnd_bttmbnd_msstrns_mn2_%d',j)));
        tmm2_selected = tmm2.String{tmm2.Value};
        
        tmm3 = findobj('Tag',(sprintf('cnd_bttmbnd_msstrns_mn3_%d',j)));
        tmm3_selected = tmm3.String{tmm3.Value};
        
        tmm4 = findobj('Tag',(sprintf('cnd_bttmbnd_msstrns_edt1_%d',j)));
        tmm4_selected = tmm4.String;
        tmm5 = findobj('Tag',(sprintf('cnd_bttmbnd_msstrns_edt2_%d',j)));
        tmm5_selected = tmm5.String;
        
        OBJ_BOUND{j+tp_mt_val+tp_imf_val+26,1} = sprintf('%s  %s  %s  %s',...
            tmm2_selected,tmm3_selected,tmm4_selected,tmm5_selected);
    end
elseif cnd_bttmbnd_msstrns_mn1.Value == 2;
    OBJ_BOUND{tp_mt_val+tp_imf_val+27:...
        bb_mt_val+tp_mt_val+tp_imf_val+27,1} = '';
    
    OBJ_BOUND{tp_mt_val+tp_imf_val+27:bb_mt_val+tp_mt_val+tp_imf_val+27,1}...
        (all(OBJ_BOUND{tp_mt_val+tp_imf_val+27:...
        bb_mt_val+tp_mt_val+tp_imf_val+27,1} == ' ', 2),:) = [];
end

OBJ_BOUND{bb_mt_val+tp_mt_val+tp_imf_val+28,1} = ' ';

OBJ_BOUND{bb_mt_val+tp_mt_val+tp_imf_val+29,1} =...
    sprintf('OUTSIDE TEMP TIME PROG:  %s  %s',...
    cnd_bttmbnd_outtmptimep_edt1.String,...
    cnd_bttmbnd_outtmptimep_edt2.String);

OBJ_BOUND{bb_mt_val+tp_mt_val+tp_imf_val+30,1} =...
    sprintf('CONVECTION COEFF:  %s',...
    cnd_bttmbnd_convcoeff1_edt.String);

OBJ_BOUND{bb_mt_val+tp_mt_val+tp_imf_val+31,1} = ' ';

OBJ_BOUND{bb_mt_val+tp_mt_val+tp_imf_val+32,1} =...
    sprintf('EXTERNAL RADIATION:  %s',...
    cnd_bttmbnd_exrd_mn.String{cnd_bttmbnd_exrd_mn.Value});

if cnd_bttmbnd_exrd_mn.Value == 1;
    OBJ_BOUND{bb_mt_val+tp_mt_val+tp_imf_val+33,1} =...
        sprintf('TIME PROG1:  %s  %s  %s',...
        cnd_bttmbnd_tmprg1_edt1.String,...
        cnd_bttmbnd_tmprg1_edt2.String,...
        cnd_bttmbnd_tmprg1_edt3.String);
    
    OBJ_BOUND{bb_mt_val+tp_mt_val+tp_imf_val+34,1} =...
        sprintf('TIME PROG2:  %s  %s  %s',...
        cnd_bttmbnd_tmprg2_edt1.String,...
        cnd_bttmbnd_tmprg2_edt2.String,...
        cnd_bttmbnd_tmprg2_edt3.String);
    
    OBJ_BOUND{bb_mt_val+tp_mt_val+tp_imf_val+35,1} =...
        sprintf('REPEAT:  %s',...
        cnd_bttmbnd_rpt_mn.String{cnd_bttmbnd_rpt_mn.Value});
    
    OBJ_BOUND{bb_mt_val+tp_mt_val+tp_imf_val+36,1} =...
        sprintf('ABSORPTION MODE:  %s',...
        cnd_bttmbnd_absrpmd_mn.String{cnd_bttmbnd_absrpmd_mn.Value});
    
elseif cnd_bttmbnd_exrd_mn.Value == 2;
    OBJ_BOUND{bb_mt_val+tp_mt_val+tp_imf_val+33:...
        bb_mt_val+tp_mt_val+tp_imf_val+36,1} = '';
    
    OBJ_BOUND{bb_mt_val+tp_mt_val+tp_imf_val+33:...
        bb_mt_val+tp_mt_val+tp_imf_val+36,1}...
        (all(OBJ_BOUND{bb_mt_val+tp_mt_val+tp_imf_val+33:...
        bb_mt_val+tp_mt_val+tp_imf_val+36,1}...
        == ' ', 2),:) = [];
end

OBJ_BOUND{bb_mt_val+tp_mt_val+tp_imf_val+37,1} = ' ';

OBJ_BOUND{bb_mt_val+tp_mt_val+tp_imf_val+38,1} =...
    sprintf('FLAME:  %s',...
    cnd_bttmbnd_flm_mn.String{cnd_bttmbnd_flm_mn.Value});

if cnd_bttmbnd_flm_mn.Value == 1;
    OBJ_BOUND{bb_mt_val+tp_mt_val+tp_imf_val+39,1} =...
        'IGNITION MASS FLUXES:';
    
    for j = 1:bb_imf_val
        timf1 = findobj(...
            'Tag',(sprintf('cnd_bttmbnd_ignmssflx_mn_%d',j)));
        timf1_selected = timf1.String{timf1.Value};
        
        timf2 = findobj(...
            'Tag',(sprintf('cnd_bttmbnd_ignmssflx_edt_%d',j)));
        timf2_selected = timf2.String;
        
        OBJ_BOUND{j+bb_mt_val+tp_mt_val+tp_imf_val+39,1} =...
            sprintf('%s  %s',...
            timf1_selected,timf2_selected);
    end
    
    OBJ_BOUND{bb_mt_val+bb_imf_val+tp_mt_val+tp_imf_val+40,1} =...
        sprintf('OUTSIDE TEMP:  %s',...
        cnd_bttmbnd_outtmp_edt.String);
    OBJ_BOUND{bb_mt_val+bb_imf_val+tp_mt_val+tp_imf_val+41,1} =...
        sprintf('CONVECTION COEFF:  %s',...
        cnd_bttmbnd_convcoeff2_edt.String);
    OBJ_BOUND{bb_mt_val+bb_imf_val+tp_mt_val+tp_imf_val+42,1} =...
        sprintf('RADIATION:  %s',...
        cnd_bttmbnd_rd_edt.String);
    
elseif cnd_bttmbnd_flm_mn.Value == 2;
    OBJ_BOUND{bb_mt_val+tp_mt_val+tp_imf_val+39:...
        bb_mt_val+bb_imf_val+tp_mt_val+tp_imf_val+42,1} = '';
    
    OBJ_BOUND{bb_mt_val+tp_mt_val+tp_imf_val+39:...
        bb_mt_val+bb_imf_val+tp_mt_val+tp_imf_val+42,1}...
        (all(OBJ_BOUND{bb_mt_val+tp_mt_val+tp_imf_val+39:...
        bb_mt_val+bb_imf_val+tp_mt_val+tp_imf_val+42,1} == ' ', 2),:) = [];
end
OBJ_BOUND{bb_mt_val+bb_imf_val+tp_mt_val+tp_imf_val+43,1} = ' ';
%% Integration Parameters
global cnd_intpar_elmtsz_edt...
    cnd_intpar_timestp_edt...
    cnd_intpar_dur_edt...
    cnd_intpar_elmt_edt...
    cnd_intpar_timestps_edt

INT_PARA{1,1} = 'INTEGRATION PARAMETERS';
INT_PARA{2,1} = '**********************';
INT_PARA{3,1} = ' ';
INT_PARA{4,1} = sprintf('ELEMENT SIZE:  %s',cnd_intpar_elmtsz_edt.String);
INT_PARA{5,1} = sprintf('TIME STEP:  %s',cnd_intpar_timestp_edt.String);
INT_PARA{6,1} = sprintf('DURATION:  %s',cnd_intpar_dur_edt.String);
INT_PARA{7,1} = ' ';
INT_PARA{7,1} = 'OUTPUT FREQUENCY:';
INT_PARA{8,1} = sprintf('ELEMENTS:  %s',cnd_intpar_elmt_edt.String);
INT_PARA{9,1} = sprintf('TIME STEPS:  %s',cnd_intpar_timestps_edt.String);
%% Object Structure
global layer_count mass_frac_count

OBJ_STRUCT{1,1} = 'OBJECT STRUCTURE';
OBJ_STRUCT{2,1} = '****************';
OBJ_STRUCT{3,1} = 'FROM TOP';

layer_count = findobj('Tag','Lcounter');
for i = 1:layer_count
    mass_frac_count = findobj('Tag',sprintf('mass_frac_count_%d',i));
    mass_frac_count_x(i)= str2double(mass_frac_count.String);
end

for all_lc = 1:layer_count
    
    if all_lc ~= 1
        mfc_sum = sum(mass_frac_count_x(1:all_lc-1));
    else
        mfc_sum = 0;
    end
    
    total_sum = 3 + 4*(all_lc-1) + mfc_sum;
    
    temp = findobj('Tag',sprintf('objstrct_temp_edt_%d',all_lc));
    thick = findobj('Tag',sprintf('objstrct_thcknss_edt_%d',all_lc));

    OBJ_STRUCT{total_sum+1,1} = sprintf('THICKNESS:  %s',thick.String);
    OBJ_STRUCT{total_sum+2,1} = sprintf('TEMPERATURE:  %s',temp.String);
    OBJ_STRUCT{total_sum+3,1} = 'MASS FRACTIONS:';

    for all_mfc = 1:mass_frac_count_x(all_lc);
    objstrct_massfrac_edt = findobj(...
        'Tag',sprintf('objstrct_massfrac_edt_%d_%d',all_lc,all_mfc));
    objstrct_massfrac_mn = findobj(...
        'Tag',sprintf('objstrct_massfrac_mn_%d_%d',all_lc,all_mfc));
    masf_mn = massfrac1.String{objstrct_massfrac_mn.Value};
    masf_edt = objstrct_massfrac_edt.String;

    OBJ_STRUCT{total_sum+3+all_mfc,1} = sprintf('%s  %s',masf_mn,masf_edt);
    end
    OBJ_STRUCT{total_sum+4+all_mfc,1} = ' ';

end
%% Create Conditions File
CND_MATRIX = char(OBJ_STRUCT{:,1},OBJ_BOUND{:,1},INT_PARA{:,1});

[FileName,PathName] = uiputfile('*.cnd','Save as');
if isequal(FileName,0) %if no file is chosen or canceled then display Cancel
    disp('User selected Cancel')
else
    dlmwrite(FileName,CND_MATRIX,'delimiter', '', 'newline', 'pc');
    dir_sz = size(PathName,2);
    if ~strncmp(pwd,PathName,dir_sz-1)
    movefile(FileName,PathName,'f');
    end
end


function cnd_closefcn(~, ~, ~)
global objstrct_figure cnd_custom_fig

delete(objstrct_figure)
delete(cnd_custom_fig)

%% $$$$$$$$$$$$$$$$$$$$$$$ THERMAKIN2D $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
function tk2d_button_Callback(hObject, eventdata, handles)




%% $$$$$$$$$$$$$$$$$$$$$$$$$ OUTPUT GUI $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
%This callback creates output figure when output button is clicked
function out_button_Callback(hObject, eventdata, handles)
global out_fig_lmt %Introduces limit which limits window to open once
if out_fig_lmt == 0 %If its not opened
    out_figure = figure(...
        'Color',[.94 .94 .94],...
        'Position',[520 460 440 300],...
        'Resize','Off',... %Creates Output figure sets it to cnd_figure
        'MenuBar','none',...
        'Name','Output',...
        'tag','out_fig',...
        'CloseRequestFcn',@closereq);
    out_fig_lmt = 1; %sets limit to 1 which stops creation of figure
elseif out_fig_lmt == 1 %If it is opened
    out_figure = findobj('Tag','cmp_fig'); %set figure 'out_fig' to out_figure
    out_figure.Visible = 'On'; %makes figure visible
    drawnow;
end

function closereq(src,callbackdata)
global cnd_fig_lmt cmp_fig_lmt out_fig_lmt
fig_lmt = [cmp_fig_lmt cnd_fig_lmt out_fig_lmt];
idx = find(fig_lmt==src);
% Close request function
% to display a question dialog box
selection = questdlg('Do you want to save?',...
    'Close Request Function',...
    'Yes','No','Yes');
switch selection,
    case 'Yes',
        %saves file
    case 'No'
        delete(gcf) %close figure without save
        fig_lmt(idx)= 0; %reset limit to 0
        return
end
